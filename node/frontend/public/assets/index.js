(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();function M(){}function zt(s,t){for(const e in t)s[e]=t[e];return s}function ts(s){return s()}function xt(){return Object.create(null)}function me(s){s.forEach(ts)}function bt(s){return typeof s=="function"}function Le(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}let ut;function Ve(s,t){return ut||(ut=document.createElement("a")),ut.href=t,s===ut.href}function _s(s){return Object.keys(s).length===0}function Dt(s,...t){if(s==null)return M;const e=s.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function bs(s){let t;return Dt(s,e=>t=e)(),t}function ke(s,t,e){s.$$.on_destroy.push(Dt(t,e))}function en(s,t,e,n){if(s){const o=ns(s,t,e,n);return s[0](o)}}function ns(s,t,e,n){return s[1]&&n?zt(e.ctx.slice(),s[1](n(t))):e.ctx}function tn(s,t,e,n){if(s[2]&&n){const o=s[2](n(e));if(t.dirty===void 0)return o;if(typeof o=="object"){const i=[],l=Math.max(t.dirty.length,o.length);for(let r=0;r<l;r+=1)i[r]=t.dirty[r]|o[r];return i}return t.dirty|o}return t.dirty}function nn(s,t,e,n,o,i){if(o){const l=ns(t,e,n,i);s.p(l,o)}}function sn(s){if(s.ctx.length>32){const t=[],e=s.ctx.length/32;for(let n=0;n<e;n++)t[n]=-1;return t}return-1}function on(s){return s==null?"":s}function ss(s,t,e){return s.set(e),t}function ln(s){return s&&bt(s.destroy)?s.destroy:M}function d(s,t){s.appendChild(t)}function L(s,t,e){s.insertBefore(t,e||null)}function O(s){s.parentNode.removeChild(s)}function Te(s,t){for(let e=0;e<s.length;e+=1)s[e]&&s[e].d(t)}function h(s){return document.createElement(s)}function Ie(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function D(s){return document.createTextNode(s)}function A(){return D(" ")}function Xe(){return D("")}function K(s,t,e,n){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e,n)}function a(s,t,e){e==null?s.removeAttribute(t):s.getAttribute(t)!==e&&s.setAttribute(t,e)}function ys(s){return Array.from(s.childNodes)}function ee(s,t){t=""+t,s.wholeText!==t&&(s.data=t)}function ce(s,t){s.value=t==null?"":t}function rn(s,t){for(let e=0;e<s.options.length;e+=1){const n=s.options[e];if(n.__value===t){n.selected=!0;return}}s.selectedIndex=-1}function ws(s){const t=s.querySelector(":checked")||s.options[0];return t&&t.__value}function V(s,t,e){s.classList[e?"add":"remove"](t)}function ks(s,t,{bubbles:e=!1,cancelable:n=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(s,e,n,t),o}let tt;function xe(s){tt=s}function yt(){if(!tt)throw new Error("Function called outside component initialization");return tt}function wt(s){yt().$$.on_mount.push(s)}function Cs(s){yt().$$.after_update.push(s)}function Ss(s){yt().$$.on_destroy.push(s)}function Os(){const s=yt();return(t,e,{cancelable:n=!1}={})=>{const o=s.$$.callbacks[t];if(o){const i=ks(t,e,{cancelable:n});return o.slice().forEach(l=>{l.call(s,i)}),!i.defaultPrevented}return!0}}function an(s,t){const e=s.$$.callbacks[t.type];e&&e.slice().forEach(n=>n.call(this,t))}const Ze=[],cn=[],pt=[],un=[],os=Promise.resolve();let Nt=!1;function is(){Nt||(Nt=!0,os.then(rs))}function ls(){return is(),os}function mt(s){pt.push(s)}const Rt=new Set;let ft=0;function rs(){const s=tt;do{for(;ft<Ze.length;){const t=Ze[ft];ft++,xe(t),Ls(t.$$)}for(xe(null),Ze.length=0,ft=0;cn.length;)cn.pop()();for(let t=0;t<pt.length;t+=1){const e=pt[t];Rt.has(e)||(Rt.add(e),e())}pt.length=0}while(Ze.length);for(;un.length;)un.pop()();Nt=!1,Rt.clear(),xe(s)}function Ls(s){if(s.fragment!==null){s.update(),me(s.before_update);const t=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,t),s.after_update.forEach(mt)}}const ht=new Set;let Je;function qe(){Je={r:0,c:[],p:Je}}function Ue(){Je.r||me(Je.c),Je=Je.p}function F(s,t){s&&s.i&&(ht.delete(s),s.i(t))}function X(s,t,e,n){if(s&&s.o){if(ht.has(s))return;ht.add(s),Je.c.push(()=>{ht.delete(s),n&&(e&&s.d(1),n())}),s.o(t)}else n&&n()}function as(s,t){const e={},n={},o={$$scope:1};let i=s.length;for(;i--;){const l=s[i],r=t[i];if(r){for(const c in l)c in r||(n[c]=1);for(const c in r)o[c]||(e[c]=r[c],o[c]=1);s[i]=r}else for(const c in l)o[c]=1}for(const l in n)l in e||(e[l]=void 0);return e}function cs(s){return typeof s=="object"&&s!==null?s:{}}function he(s){s&&s.c()}function ue(s,t,e,n){const{fragment:o,on_mount:i,on_destroy:l,after_update:r}=s.$$;o&&o.m(t,e),n||mt(()=>{const c=i.map(ts).filter(bt);l?l.push(...c):me(c),s.$$.on_mount=[]}),r.forEach(mt)}function fe(s,t){const e=s.$$;e.fragment!==null&&(me(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Ps(s,t){s.$$.dirty[0]===-1&&(Ze.push(s),is(),s.$$.dirty.fill(0)),s.$$.dirty[t/31|0]|=1<<t%31}function Pe(s,t,e,n,o,i,l,r=[-1]){const c=tt;xe(s);const u=s.$$={fragment:null,ctx:null,props:i,update:M,not_equal:o,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:xt(),dirty:r,skip_bound:!1,root:t.target||c.$$.root};l&&l(u.root);let f=!1;if(u.ctx=e?e(s,t.props||{},(g,m,..._)=>{const w=_.length?_[0]:m;return u.ctx&&o(u.ctx[g],u.ctx[g]=w)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](w),f&&Ps(s,g)),m}):[],u.update(),f=!0,me(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const g=ys(t.target);u.fragment&&u.fragment.l(g),g.forEach(O)}else u.fragment&&u.fragment.c();t.intro&&F(s.$$.fragment),ue(s,t.target,t.anchor,t.customElement),rs()}xe(c)}class Ae{$destroy(){fe(this,1),this.$destroy=M}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const o=n.indexOf(e);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!_s(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ye=[];function us(s,t){return{subscribe:ze(s,t).subscribe}}function ze(s,t=M){let e;const n=new Set;function o(r){if(Le(s,r)&&(s=r,e)){const c=!Ye.length;for(const u of n)u[1](),Ye.push(u,s);if(c){for(let u=0;u<Ye.length;u+=2)Ye[u][0](Ye[u+1]);Ye.length=0}}}function i(r){o(r(s))}function l(r,c=M){const u=[r,c];return n.add(u),n.size===1&&(e=t(o)||M),r(s),()=>{n.delete(u),n.size===0&&(e(),e=null)}}return{set:o,update:i,subscribe:l}}function fs(s,t,e){const n=!Array.isArray(s),o=n?[s]:s,i=t.length<2;return us(e,l=>{let r=!1;const c=[];let u=0,f=M;const g=()=>{if(u)return;f();const _=t(n?c[0]:c,l);i?l(_):f=bt(_)?_:M},m=o.map((_,w)=>Dt(_,p=>{c[w]=p,u&=~(1<<w),r&&g()},()=>{u|=1<<w}));return r=!0,g(),function(){me(m),f()}})}function As(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var e,n,o,i,l=[],r="",c=s.split("/");for(c[0]||c.shift();o=c.shift();)e=o[0],e==="*"?(l.push("wild"),r+="/(.*)"):e===":"?(n=o.indexOf("?",1),i=o.indexOf(".",1),l.push(o.substring(1,~n?n:~i?i:o.length)),r+=!!~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(r+=(~n?"?":"")+"\\"+o.substring(i))):r+="/"+o;return{keys:l,pattern:new RegExp("^"+r+(t?"(?=$|/)":"/?$"),"i")}}function js(s){let t,e,n;const o=[s[2]];var i=s[0];function l(r){let c={};for(let u=0;u<o.length;u+=1)c=zt(c,o[u]);return{props:c}}return i&&(t=new i(l()),t.$on("routeEvent",s[7])),{c(){t&&he(t.$$.fragment),e=Xe()},m(r,c){t&&ue(t,r,c),L(r,e,c),n=!0},p(r,c){const u=c&4?as(o,[cs(r[2])]):{};if(i!==(i=r[0])){if(t){qe();const f=t;X(f.$$.fragment,1,0,()=>{fe(f,1)}),Ue()}i?(t=new i(l()),t.$on("routeEvent",r[7]),he(t.$$.fragment),F(t.$$.fragment,1),ue(t,e.parentNode,e)):t=null}else i&&t.$set(u)},i(r){n||(t&&F(t.$$.fragment,r),n=!0)},o(r){t&&X(t.$$.fragment,r),n=!1},d(r){r&&O(e),t&&fe(t,r)}}}function Es(s){let t,e,n;const o=[{params:s[1]},s[2]];var i=s[0];function l(r){let c={};for(let u=0;u<o.length;u+=1)c=zt(c,o[u]);return{props:c}}return i&&(t=new i(l()),t.$on("routeEvent",s[6])),{c(){t&&he(t.$$.fragment),e=Xe()},m(r,c){t&&ue(t,r,c),L(r,e,c),n=!0},p(r,c){const u=c&6?as(o,[c&2&&{params:r[1]},c&4&&cs(r[2])]):{};if(i!==(i=r[0])){if(t){qe();const f=t;X(f.$$.fragment,1,0,()=>{fe(f,1)}),Ue()}i?(t=new i(l()),t.$on("routeEvent",r[6]),he(t.$$.fragment),F(t.$$.fragment,1),ue(t,e.parentNode,e)):t=null}else i&&t.$set(u)},i(r){n||(t&&F(t.$$.fragment,r),n=!0)},o(r){t&&X(t.$$.fragment,r),n=!1},d(r){r&&O(e),t&&fe(t,r)}}}function Ts(s){let t,e,n,o;const i=[Es,js],l=[];function r(c,u){return c[1]?0:1}return t=r(s),e=l[t]=i[t](s),{c(){e.c(),n=Xe()},m(c,u){l[t].m(c,u),L(c,n,u),o=!0},p(c,[u]){let f=t;t=r(c),t===f?l[t].p(c,u):(qe(),X(l[f],1,1,()=>{l[f]=null}),Ue(),e=l[t],e?e.p(c,u):(e=l[t]=i[t](c),e.c()),F(e,1),e.m(n.parentNode,n))},i(c){o||(F(e),o=!0)},o(c){X(e),o=!1},d(c){l[t].d(c),c&&O(n)}}}function fn(){const s=window.location.href.indexOf("#/");let t=s>-1?window.location.href.substr(s+1):"/";const e=t.indexOf("?");let n="";return e>-1&&(n=t.substr(e+1),t=t.substr(0,e)),{location:t,querystring:n}}const Mt=us(null,function(t){t(fn());const e=()=>{t(fn())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),Rs=fs(Mt,s=>s.location),Ns=fs(Mt,s=>s.querystring),dn=ze(void 0);async function Ee(s){if(!s||s.length<1||s.charAt(0)!="/"&&s.indexOf("#/")!==0)throw Error("Invalid parameter location");await ls(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(s.charAt(0)=="#"?"":"#")+s}function Is(s){s?window.scrollTo(s.__svelte_spa_router_scrollX,s.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function qs(s,t,e){let{routes:n={}}=t,{prefix:o=""}=t,{restoreScrollState:i=!1}=t;class l{constructor(y,S){if(!S||typeof S!="function"&&(typeof S!="object"||S._sveltesparouter!==!0))throw Error("Invalid component object");if(!y||typeof y=="string"&&(y.length<1||y.charAt(0)!="/"&&y.charAt(0)!="*")||typeof y=="object"&&!(y instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:R}=As(y);this.path=y,typeof S=="object"&&S._sveltesparouter===!0?(this.component=S.component,this.conditions=S.conditions||[],this.userData=S.userData,this.props=S.props||{}):(this.component=()=>Promise.resolve(S),this.conditions=[],this.props={}),this._pattern=j,this._keys=R}match(y){if(o){if(typeof o=="string")if(y.startsWith(o))y=y.substr(o.length)||"/";else return null;else if(o instanceof RegExp){const T=y.match(o);if(T&&T[0])y=y.substr(T[0].length)||"/";else return null}}const S=this._pattern.exec(y);if(S===null)return null;if(this._keys===!1)return S;const j={};let R=0;for(;R<this._keys.length;){try{j[this._keys[R]]=decodeURIComponent(S[R+1]||"")||null}catch{j[this._keys[R]]=null}R++}return j}async checkConditions(y){for(let S=0;S<this.conditions.length;S++)if(!await this.conditions[S](y))return!1;return!0}}const r=[];n instanceof Map?n.forEach((v,y)=>{r.push(new l(y,v))}):Object.keys(n).forEach(v=>{r.push(new l(v,n[v]))});let c=null,u=null,f={};const g=Os();async function m(v,y){await ls(),g(v,y)}let _=null,w=null;i&&(w=v=>{v.state&&(v.state.__svelte_spa_router_scrollY||v.state.__svelte_spa_router_scrollX)?_=v.state:_=null},window.addEventListener("popstate",w),Cs(()=>{Is(_)}));let p=null,b=null;const N=Mt.subscribe(async v=>{p=v;let y=0;for(;y<r.length;){const S=r[y].match(v.location);if(!S){y++;continue}const j={route:r[y].path,location:v.location,querystring:v.querystring,userData:r[y].userData,params:S&&typeof S=="object"&&Object.keys(S).length?S:null};if(!await r[y].checkConditions(j)){e(0,c=null),b=null,m("conditionsFailed",j);return}m("routeLoading",Object.assign({},j));const R=r[y].component;if(b!=R){R.loading?(e(0,c=R.loading),b=R,e(1,u=R.loadingParams),e(2,f={}),m("routeLoaded",Object.assign({},j,{component:c,name:c.name,params:u}))):(e(0,c=null),b=null);const T=await R();if(v!=p)return;e(0,c=T&&T.default||T),b=R}S&&typeof S=="object"&&Object.keys(S).length?e(1,u=S):e(1,u=null),e(2,f=r[y].props),m("routeLoaded",Object.assign({},j,{component:c,name:c.name,params:u})).then(()=>{dn.set(u)});return}e(0,c=null),b=null,dn.set(void 0)});Ss(()=>{N(),w&&window.removeEventListener("popstate",w)});function k(v){an.call(this,s,v)}function C(v){an.call(this,s,v)}return s.$$set=v=>{"routes"in v&&e(3,n=v.routes),"prefix"in v&&e(4,o=v.prefix),"restoreScrollState"in v&&e(5,i=v.restoreScrollState)},s.$$.update=()=>{s.$$.dirty&32&&(history.scrollRestoration=i?"manual":"auto")},[c,u,f,n,o,i,k,C]}class Us extends Ae{constructor(t){super(),Pe(this,t,qs,Ts,Le,{routes:3,prefix:4,restoreScrollState:5})}}var It=function(s,t){return It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},It(s,t)};function le(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=s}It(s,t),s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qt=function(){return qt=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=t[o]);return s},qt.apply(this,arguments)};function Be(s,t,e,n){return new(e||(e=Promise))(function(o,i){function l(u){try{c(n.next(u))}catch(f){i(f)}}function r(u){try{c(n.throw(u))}catch(f){i(f)}}function c(u){var f;u.done?o(u.value):(f=u.value,f instanceof e?f:new e(function(g){g(f)})).then(l,r)}c((n=n.apply(s,t||[])).next())})}function Ge(s,t){var e,n,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function r(c){return function(u){return function(f){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,n&&(o=2&f[0]?n.return:f[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,f[1])).done)return o;switch(n=0,o&&(f=[2&f[0],o.value]),f[0]){case 0:case 1:o=f;break;case 4:return l.label++,{value:f[1],done:!1};case 5:l.label++,n=f[1],f=[0];continue;case 7:f=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!((o=o.length>0&&o[o.length-1])||f[0]!==6&&f[0]!==2)){l=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){l.label=f[1];break}if(f[0]===6&&l.label<o[1]){l.label=o[1],o=f;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(f);break}o[2]&&l.ops.pop(),l.trys.pop();continue}f=t.call(s,l)}catch(g){f=[6,g],n=0}finally{e=o=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([c,u])}}}var ds,pn=function(s){function t(e){var n,o=this;return(o=s.call(this,"ClientResponseError")||this).url="",o.status=0,o.data={},o.isAbort=!1,o.originalError=null,Object.setPrototypeOf(o,t.prototype),e instanceof t||(o.originalError=e),e!==null&&typeof e=="object"&&(o.url=typeof e.url=="string"?e.url:"",o.status=typeof e.status=="number"?e.status:0,o.data=e.data!==null&&typeof e.data=="object"?e.data:{}),typeof DOMException<"u"&&e instanceof DOMException&&(o.isAbort=!0),o.name="ClientResponseError "+o.status,o.message=((n=o.data)===null||n===void 0?void 0:n.message)||"Something went wrong while processing your request.",o}return le(t,s),t.prototype.toJSON=function(){return qt({},this)},t}(Error),dt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function hn(s,t,e){var n=Object.assign({},e||{}),o=n.encode||Ds;if(!dt.test(s))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!dt.test(i))throw new TypeError("argument val is invalid");var l=s+"="+i;if(n.maxAge!=null){var r=n.maxAge-0;if(isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(r)}if(n.domain){if(!dt.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!dt.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l}function zs(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function Ds(s){return encodeURIComponent(s)}function mn(s){if(s)try{var t=decodeURIComponent(ds(s.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}ds=typeof atob=="function"?atob:function(s){return Buffer=global.Buffer||require("buffer").Buffer,Buffer.from(s,"base64").toString("binary")};var Qe=function(){function s(t){t===void 0&&(t={}),this.load(t||{})}return s.prototype.load=function(t){this.id=t.id!==void 0?t.id:"",this.created=t.created!==void 0?t.created:"",this.updated=t.updated!==void 0?t.updated:""},Object.defineProperty(s.prototype,"isNew",{get:function(){return!this.id||this.id==="00000000-0000-0000-0000-000000000000"},enumerable:!1,configurable:!0}),s.prototype.clone=function(){return new this.constructor(JSON.parse(JSON.stringify(this)))},s.prototype.export=function(){return Object.assign({},this)},s}(),ps=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e);for(var n=0,o=Object.entries(e);n<o.length;n++){var i=o[n],l=i[0],r=i[1];this[l]=r}this["@collectionId"]=e["@collectionId"]!==void 0?e["@collectionId"]:"",this["@collectionName"]=e["@collectionName"]!==void 0?e["@collectionName"]:"",this["@expand"]=e["@expand"]!==void 0?e["@expand"]:{}},t}(Qe),vt=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e),this.email=typeof e.email=="string"?e.email:"",this.verified=!!e.verified,this.lastResetSentAt=typeof e.lastResetSentAt=="string"?e.lastResetSentAt:"",this.lastVerificationSentAt=typeof e.lastVerificationSentAt=="string"?e.lastVerificationSentAt:"",this.profile=e.profile?new ps(e.profile):null},t}(Qe),Ft=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e),this.avatar=typeof e.avatar=="number"?e.avatar:0,this.email=typeof e.email=="string"?e.email:"",this.lastResetSentAt=typeof e.lastResetSentAt=="string"?e.lastResetSentAt:""},t}(Qe),Ms=function(){function s(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(s.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isValid",{get:function(){return!function(t,e){e===void 0&&(e=0);var n=mn(t);return!(Object.keys(n).length>0&&(!n.exp||n.exp-e>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),s.prototype.save=function(t,e){this.baseToken=t||"",this.baseModel=e!==null&&typeof e=="object"?(e==null?void 0:e.verified)!=="undefined"?new vt(e):new Ft(e):null,this.triggerChange()},s.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},s.prototype.loadFromCookie=function(t,e){e===void 0&&(e="pb_auth");var n=function(i,l){var r={};if(typeof i!="string")return r;for(var c=Object.assign({},l||{}).decode||zs,u=0;u<i.length;){var f=i.indexOf("=",u);if(f===-1)break;var g=i.indexOf(";",u);if(g===-1)g=i.length;else if(g<f){u=i.lastIndexOf(";",f-1)+1;continue}var m=i.slice(u,f).trim();if(r[m]===void 0){var _=i.slice(f+1,g).trim();_.charCodeAt(0)===34&&(_=_.slice(1,-1));try{r[m]=c(_)}catch{r[m]=_}}u=g+1}return r}(t||"")[e]||"",o={};try{(typeof(o=JSON.parse(n))===null||typeof o!="object"||Array.isArray(o))&&(o={})}catch{}this.save(o.token||"",o.model||{})},s.prototype.exportToCookie=function(t,e){var n,o,i;e===void 0&&(e="pb_auth");var l={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},r=mn(this.token);r!=null&&r.exp?l.expires=new Date(1e3*r.exp):l.expires=new Date("1970-01-01"),t=Object.assign({},l,t);var c={token:this.token,model:((n=this.model)===null||n===void 0?void 0:n.export())||null},u=hn(e,JSON.stringify(c),t),f=typeof Blob<"u"?new Blob([u]).size:u.length;return c.model&&f>4096&&(c.model={id:(o=c==null?void 0:c.model)===null||o===void 0?void 0:o.id,email:(i=c==null?void 0:c.model)===null||i===void 0?void 0:i.email},this.model instanceof vt&&(c.model.verified=this.model.verified),u=hn(e,JSON.stringify(c),t)),u},s.prototype.onChange=function(t){var e=this;return this._onChangeCallbacks.push(t),function(){for(var n=e._onChangeCallbacks.length-1;n>=0;n--)if(e._onChangeCallbacks[n]==t)return delete e._onChangeCallbacks[n],void e._onChangeCallbacks.splice(n,1)}},s.prototype.triggerChange=function(){for(var t=0,e=this._onChangeCallbacks;t<e.length;t++){var n=e[t];n&&n(this.token,this.model)}},s}(),Fs=function(s){function t(e){e===void 0&&(e="pocketbase_auth");var n=s.call(this)||this;return n.storageFallback={},n.storageKey=e,n}return le(t,s),Object.defineProperty(t.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){var e,n=this._storageGet(this.storageKey)||{};return n===null||typeof n!="object"||n.model===null||typeof n.model!="object"?null:((e=n.model)===null||e===void 0?void 0:e.verified)!==void 0?new vt(n.model):new Ft(n.model)},enumerable:!1,configurable:!0}),t.prototype.save=function(e,n){this._storageSet(this.storageKey,{token:e,model:n}),s.prototype.save.call(this,e,n)},t.prototype.clear=function(){this._storageRemove(this.storageKey),s.prototype.clear.call(this)},t.prototype._storageGet=function(e){var n;if(typeof window<"u"&&(window==null?void 0:window.localStorage)){var o=((n=window==null?void 0:window.localStorage)===null||n===void 0?void 0:n.getItem(e))||"";try{return JSON.parse(o)}catch{return o}}return this.storageFallback[e]},t.prototype._storageSet=function(e,n){var o;if(typeof window<"u"&&(window==null?void 0:window.localStorage)){var i=n;typeof n!="string"&&(i=JSON.stringify(n)),(o=window==null?void 0:window.localStorage)===null||o===void 0||o.setItem(e,i)}else this.storageFallback[e]=n},t.prototype._storageRemove=function(e){var n;typeof window<"u"&&((n=window==null?void 0:window.localStorage)===null||n===void 0||n.removeItem(e)),delete this.storageFallback[e]},t}(Ms),kt=function(s){this.client=s},Js=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.getAll=function(e){return e===void 0&&(e={}),this.client.send("/api/settings",{method:"GET",params:e}).then(function(n){return n||{}})},t.prototype.update=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this.client.send("/api/settings",{method:"PATCH",params:n,body:e}).then(function(o){return o||{}})},t.prototype.testS3=function(e){return e===void 0&&(e={}),this.client.send("/api/settings/test/s3",{method:"POST",params:e}).then(function(){return!0})},t.prototype.testEmail=function(e,n,o){o===void 0&&(o={});var i={email:e,template:n};return this.client.send("/api/settings/test/email",{method:"POST",params:o,body:i}).then(function(){return!0})},t}(kt),hs=function(s,t,e,n,o){this.page=s>0?s:1,this.perPage=t>=0?t:0,this.totalItems=e>=0?e:0,this.totalPages=n>=0?n:0,this.items=o||[]},ms=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype._getFullList=function(e,n,o){var i=this;n===void 0&&(n=100),o===void 0&&(o={});var l=[],r=function(c){return Be(i,void 0,void 0,function(){return Ge(this,function(u){return[2,this._getList(e,c,n,o).then(function(f){var g=f,m=g.items,_=g.totalItems;return l=l.concat(m),m.length&&_>l.length?r(c+1):l})]})})};return r(1)},t.prototype._getList=function(e,n,o,i){var l=this;return n===void 0&&(n=1),o===void 0&&(o=30),i===void 0&&(i={}),i=Object.assign({page:n,perPage:o},i),this.client.send(e,{method:"GET",params:i}).then(function(r){var c=[];if(r!=null&&r.items){r.items=r.items||[];for(var u=0,f=r.items;u<f.length;u++){var g=f[u];c.push(l.decode(g))}}return new hs((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,c)})},t.prototype._getOne=function(e,n,o){var i=this;return o===void 0&&(o={}),this.client.send(e+"/"+encodeURIComponent(n),{method:"GET",params:o}).then(function(l){return i.decode(l)})},t.prototype._create=function(e,n,o){var i=this;return n===void 0&&(n={}),o===void 0&&(o={}),this.client.send(e,{method:"POST",params:o,body:n}).then(function(l){return i.decode(l)})},t.prototype._update=function(e,n,o,i){var l=this;return o===void 0&&(o={}),i===void 0&&(i={}),this.client.send(e+"/"+encodeURIComponent(n),{method:"PATCH",params:i,body:o}).then(function(r){return l.decode(r)})},t.prototype._delete=function(e,n,o){return o===void 0&&(o={}),this.client.send(e+"/"+encodeURIComponent(n),{method:"DELETE",params:o}).then(function(){return!0})},t}(kt),Jt=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.getFullList=function(e,n){return e===void 0&&(e=100),n===void 0&&(n={}),this._getFullList(this.baseCrudPath(),e,n)},t.prototype.getList=function(e,n,o){return e===void 0&&(e=1),n===void 0&&(n=30),o===void 0&&(o={}),this._getList(this.baseCrudPath(),e,n,o)},t.prototype.getOne=function(e,n){return n===void 0&&(n={}),this._getOne(this.baseCrudPath(),e,n)},t.prototype.create=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this._create(this.baseCrudPath(),e,n)},t.prototype.update=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),this._update(this.baseCrudPath(),e,n,o)},t.prototype.delete=function(e,n){return n===void 0&&(n={}),this._delete(this.baseCrudPath(),e,n)},t}(ms),Bs=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.decode=function(e){return new Ft(e)},t.prototype.baseCrudPath=function(){return"/api/admins"},t.prototype.authResponse=function(e){var n=this.decode((e==null?void 0:e.admin)||{});return(e==null?void 0:e.token)&&(e==null?void 0:e.admin)&&this.client.authStore.save(e.token,n),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:n})},t.prototype.authViaEmail=function(e,n,o,i){return o===void 0&&(o={}),i===void 0&&(i={}),o=Object.assign({email:e,password:n},o),this.client.send(this.baseCrudPath()+"/auth-via-email",{method:"POST",params:i,body:o,headers:{Authorization:""}}).then(this.authResponse.bind(this))},t.prototype.refresh=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this.client.send(this.baseCrudPath()+"/refresh",{method:"POST",params:n,body:e}).then(this.authResponse.bind(this))},t.prototype.requestPasswordReset=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),n=Object.assign({email:e},n),this.client.send(this.baseCrudPath()+"/request-password-reset",{method:"POST",params:o,body:n}).then(function(){return!0})},t.prototype.confirmPasswordReset=function(e,n,o,i,l){return i===void 0&&(i={}),l===void 0&&(l={}),i=Object.assign({token:e,password:n,passwordConfirm:o},i),this.client.send(this.baseCrudPath()+"/confirm-password-reset",{method:"POST",params:l,body:i}).then(this.authResponse.bind(this))},t}(Jt),Gs=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e),this.userId=typeof e.userId=="string"?e.userId:"",this.provider=typeof e.provider=="string"?e.provider:"",this.providerId=typeof e.providerId=="string"?e.providerId:""},t}(Qe),Vs=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.decode=function(e){return new vt(e)},t.prototype.baseCrudPath=function(){return"/api/users"},t.prototype.authResponse=function(e){var n=this.decode((e==null?void 0:e.user)||{});return(e==null?void 0:e.token)&&(e==null?void 0:e.user)&&this.client.authStore.save(e.token,n),Object.assign({},e,{token:(e==null?void 0:e.token)||"",user:n})},t.prototype.listAuthMethods=function(e){return e===void 0&&(e={}),this.client.send(this.baseCrudPath()+"/auth-methods",{method:"GET",params:e}).then(function(n){return Object.assign({},n,{emailPassword:!!(n!=null&&n.emailPassword),authProviders:Array.isArray(n==null?void 0:n.authProviders)?n==null?void 0:n.authProviders:[]})})},t.prototype.authViaEmail=function(e,n,o,i){return o===void 0&&(o={}),i===void 0&&(i={}),o=Object.assign({email:e,password:n},o),this.client.send(this.baseCrudPath()+"/auth-via-email",{method:"POST",params:i,body:o,headers:{Authorization:""}}).then(this.authResponse.bind(this))},t.prototype.authViaOAuth2=function(e,n,o,i,l,r){return l===void 0&&(l={}),r===void 0&&(r={}),l=Object.assign({provider:e,code:n,codeVerifier:o,redirectUrl:i},l),this.client.send(this.baseCrudPath()+"/auth-via-oauth2",{method:"POST",params:r,body:l,headers:{Authorization:""}}).then(this.authResponse.bind(this))},t.prototype.refresh=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this.client.send(this.baseCrudPath()+"/refresh",{method:"POST",params:n,body:e}).then(this.authResponse.bind(this))},t.prototype.requestPasswordReset=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),n=Object.assign({email:e},n),this.client.send(this.baseCrudPath()+"/request-password-reset",{method:"POST",params:o,body:n}).then(function(){return!0})},t.prototype.confirmPasswordReset=function(e,n,o,i,l){return i===void 0&&(i={}),l===void 0&&(l={}),i=Object.assign({token:e,password:n,passwordConfirm:o},i),this.client.send(this.baseCrudPath()+"/confirm-password-reset",{method:"POST",params:l,body:i}).then(this.authResponse.bind(this))},t.prototype.requestVerification=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),n=Object.assign({email:e},n),this.client.send(this.baseCrudPath()+"/request-verification",{method:"POST",params:o,body:n}).then(function(){return!0})},t.prototype.confirmVerification=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),n=Object.assign({token:e},n),this.client.send(this.baseCrudPath()+"/confirm-verification",{method:"POST",params:o,body:n}).then(this.authResponse.bind(this))},t.prototype.requestEmailChange=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),n=Object.assign({newEmail:e},n),this.client.send(this.baseCrudPath()+"/request-email-change",{method:"POST",params:o,body:n}).then(function(){return!0})},t.prototype.confirmEmailChange=function(e,n,o,i){return o===void 0&&(o={}),i===void 0&&(i={}),o=Object.assign({token:e,password:n},o),this.client.send(this.baseCrudPath()+"/confirm-email-change",{method:"POST",params:i,body:o}).then(this.authResponse.bind(this))},t.prototype.listExternalAuths=function(e,n){return n===void 0&&(n={}),this.client.send(this.baseCrudPath()+"/"+encodeURIComponent(e)+"/external-auths",{method:"GET",params:n}).then(function(o){var i=[];if(Array.isArray(o))for(var l=0,r=o;l<r.length;l++){var c=r[l];i.push(new Gs(c))}return i})},t.prototype.unlinkExternalAuth=function(e,n,o){return o===void 0&&(o={}),this.client.send(this.baseCrudPath()+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(n),{method:"DELETE",params:o}).then(function(){return!0})},t}(Jt),Ws=function(){function s(t){t===void 0&&(t={}),this.load(t||{})}return s.prototype.load=function(t){this.id=t.id!==void 0?t.id:"",this.name=t.name!==void 0?t.name:"",this.type=t.type!==void 0?t.type:"text",this.system=!!t.system,this.required=!!t.required,this.unique=!!t.unique,this.options=typeof t.options=="object"&&t.options!==null?t.options:{}},s}(),Ks=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e),this.name=typeof e.name=="string"?e.name:"",this.system=!!e.system,this.listRule=typeof e.listRule=="string"?e.listRule:null,this.viewRule=typeof e.viewRule=="string"?e.viewRule:null,this.createRule=typeof e.createRule=="string"?e.createRule:null,this.updateRule=typeof e.updateRule=="string"?e.updateRule:null,this.deleteRule=typeof e.deleteRule=="string"?e.deleteRule:null,e.schema=Array.isArray(e.schema)?e.schema:[],this.schema=[];for(var n=0,o=e.schema;n<o.length;n++){var i=o[n];this.schema.push(new Ws(i))}},t}(Qe),Ys=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.decode=function(e){return new Ks(e)},t.prototype.baseCrudPath=function(){return"/api/collections"},t.prototype.import=function(e,n,o){return n===void 0&&(n=!1),o===void 0&&(o={}),Be(this,void 0,void 0,function(){return Ge(this,function(i){return[2,this.client.send(this.baseCrudPath()+"/import",{method:"PUT",params:o,body:{collections:e,deleteMissing:n}}).then(function(){return!0})]})})},t}(Jt),Hs=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.decode=function(e){return new ps(e)},t.prototype.baseCrudPath=function(e){return"/api/collections/"+encodeURIComponent(e)+"/records"},t.prototype.getFileUrl=function(e,n,o){o===void 0&&(o={});var i=[];i.push(this.client.baseUrl.replace(/\/+$/gm,"")),i.push("api"),i.push("files"),i.push(e["@collectionId"]),i.push(e.id),i.push(n);var l=i.join("/");if(Object.keys(o).length){var r=new URLSearchParams(o);l+=(l.includes("?")?"&":"?")+r}return l},t}(function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.getFullList=function(e,n,o){return n===void 0&&(n=100),o===void 0&&(o={}),this._getFullList(this.baseCrudPath(e),n,o)},t.prototype.getList=function(e,n,o,i){return n===void 0&&(n=1),o===void 0&&(o=30),i===void 0&&(i={}),this._getList(this.baseCrudPath(e),n,o,i)},t.prototype.getOne=function(e,n,o){return o===void 0&&(o={}),this._getOne(this.baseCrudPath(e),n,o)},t.prototype.create=function(e,n,o){return n===void 0&&(n={}),o===void 0&&(o={}),this._create(this.baseCrudPath(e),n,o)},t.prototype.update=function(e,n,o,i){return o===void 0&&(o={}),i===void 0&&(i={}),this._update(this.baseCrudPath(e),n,o,i)},t.prototype.delete=function(e,n,o){return o===void 0&&(o={}),this._delete(this.baseCrudPath(e),n,o)},t}(ms)),vn=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.load=function(e){s.prototype.load.call(this,e),e.remoteIp=e.remoteIp||e.ip,this.url=typeof e.url=="string"?e.url:"",this.method=typeof e.method=="string"?e.method:"GET",this.status=typeof e.status=="number"?e.status:200,this.auth=typeof e.auth=="string"?e.auth:"guest",this.remoteIp=typeof e.remoteIp=="string"?e.remoteIp:"",this.userIp=typeof e.userIp=="string"?e.userIp:"",this.referer=typeof e.referer=="string"?e.referer:"",this.userAgent=typeof e.userAgent=="string"?e.userAgent:"",this.meta=typeof e.meta=="object"&&e.meta!==null?e.meta:{}},t}(Qe),Xs=function(s){function t(){return s!==null&&s.apply(this,arguments)||this}return le(t,s),t.prototype.getRequestsList=function(e,n,o){return e===void 0&&(e=1),n===void 0&&(n=30),o===void 0&&(o={}),o=Object.assign({page:e,perPage:n},o),this.client.send("/api/logs/requests",{method:"GET",params:o}).then(function(i){var l=[];if(i!=null&&i.items){i.items=(i==null?void 0:i.items)||[];for(var r=0,c=i.items;r<c.length;r++){var u=c[r];l.push(new vn(u))}}return new hs((i==null?void 0:i.page)||1,(i==null?void 0:i.perPage)||0,(i==null?void 0:i.totalItems)||0,(i==null?void 0:i.totalPages)||0,l)})},t.prototype.getRequest=function(e,n){return n===void 0&&(n={}),this.client.send("/api/logs/requests/"+encodeURIComponent(e),{method:"GET",params:n}).then(function(o){return new vn(o)})},t.prototype.getRequestsStats=function(e){return e===void 0&&(e={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:e}).then(function(n){return n})},t}(kt),Qs=function(s){function t(){var e=s!==null&&s.apply(this,arguments)||this;return e.clientId="",e.eventSource=null,e.subscriptions={},e}return le(t,s),t.prototype.subscribe=function(e,n){var o;return Be(this,void 0,void 0,function(){return Ge(this,function(i){switch(i.label){case 0:if(!e)throw new Error("subscription must be set.");return this.subscriptions[e]&&((o=this.eventSource)===null||o===void 0||o.removeEventListener(e,this.subscriptions[e])),this.subscriptions[e]=function(l){var r,c=l;try{r=JSON.parse(c==null?void 0:c.data)}catch{}n(r||{})},this.eventSource?[3,1]:(this.connect(),[3,3]);case 1:return this.clientId?[4,this.submitSubscriptions()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.unsubscribe=function(e){var n;return Be(this,void 0,void 0,function(){return Ge(this,function(o){switch(o.label){case 0:if(e){if(!this.subscriptions[e])return[2];(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,this.subscriptions[e]),delete this.subscriptions[e]}else this.removeSubscriptionListeners(),this.subscriptions={};return this.clientId?[4,this.submitSubscriptions()]:[3,2];case 1:o.sent(),o.label=2;case 2:return Object.keys(this.subscriptions).length||this.disconnect(),[2]}})})},t.prototype.submitSubscriptions=function(){return Be(this,void 0,void 0,function(){return Ge(this,function(e){return this.addSubscriptionListeners(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:Object.keys(this.subscriptions)},params:{$autoCancel:!1}}).then(function(){return!0})]})})},t.prototype.addSubscriptionListeners=function(){if(this.eventSource)for(var e in this.removeSubscriptionListeners(),this.subscriptions)this.eventSource.addEventListener(e,this.subscriptions[e])},t.prototype.removeSubscriptionListeners=function(){if(this.eventSource)for(var e in this.subscriptions)this.eventSource.removeEventListener(e,this.subscriptions[e])},t.prototype.connectHandler=function(e){var n=e;this.clientId=n==null?void 0:n.lastEventId,this.submitSubscriptions()},t.prototype.connect=function(){var e=this;this.disconnect(),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.addEventListener("PB_CONNECT",function(n){return e.connectHandler(n)})},t.prototype.disconnect=function(){var e,n,o=this;this.removeSubscriptionListeners(),(e=this.eventSource)===null||e===void 0||e.removeEventListener("PB_CONNECT",function(i){return o.connectHandler(i)}),(n=this.eventSource)===null||n===void 0||n.close(),this.eventSource=null,this.clientId=""},t}(kt),Zs=function(){function s(t,e,n){t===void 0&&(t="/"),e===void 0&&(e="en-US"),this.cancelControllers={},this.baseUrl=t,this.lang=e,this.authStore=n||new Fs,this.admins=new Bs(this),this.users=new Vs(this),this.records=new Hs(this),this.collections=new Ys(this),this.logs=new Xs(this),this.settings=new Js(this),this.realtime=new Qs(this)}return Object.defineProperty(s.prototype,"AuthStore",{get:function(){return this.authStore},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Settings",{get:function(){return this.settings},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Admins",{get:function(){return this.admins},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Users",{get:function(){return this.users},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Collections",{get:function(){return this.collections},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Records",{get:function(){return this.records},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Logs",{get:function(){return this.logs},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Realtime",{get:function(){return this.realtime},enumerable:!1,configurable:!0}),s.prototype.cancelRequest=function(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this},s.prototype.cancelAllRequests=function(){for(var t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this},s.prototype.send=function(t,e){var n,o,i,l,r,c,u,f,g;return Be(this,void 0,void 0,function(){var m,_,w,p,b,N,k=this;return Ge(this,function(C){return(m=Object.assign({method:"GET"},e)).body&&m.body.constructor.name!=="FormData"&&(typeof m.body!="string"&&(m.body=JSON.stringify(m.body)),((n=m==null?void 0:m.headers)===null||n===void 0?void 0:n["Content-Type"])===void 0&&(m.headers=Object.assign({},m.headers,{"Content-Type":"application/json"}))),((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o["Accept-Language"])===void 0&&(m.headers=Object.assign({},m.headers,{"Accept-Language":this.lang})),((i=this.authStore)===null||i===void 0?void 0:i.token)&&((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l.Authorization)===void 0&&(_="Admin",((r=this.authStore.model)===null||r===void 0?void 0:r.verified)!==void 0&&(_="User"),m.headers=Object.assign({},m.headers,{Authorization:_+" "+this.authStore.token})),((c=m.params)===null||c===void 0?void 0:c.$autoCancel)!==!1&&(w=((u=m.params)===null||u===void 0?void 0:u.$cancelKey)||(m.method||"GET")+t,this.cancelRequest(w),p=new AbortController,this.cancelControllers[w]=p,m.signal=p.signal),(f=m.params)===null||f===void 0||delete f.$autoCancel,(g=m.params)===null||g===void 0||delete g.$cancelKey,b=this.buildUrl(t),m.params!==void 0&&((N=this.serializeQueryParams(m.params))&&(b+=(b.includes("?")?"&":"?")+N),delete m.params),this.beforeSend&&(m=Object.assign({},this.beforeSend(b,m))),[2,fetch(b,m).then(function(v){return Be(k,void 0,void 0,function(){var y;return Ge(this,function(S){switch(S.label){case 0:y={},S.label=1;case 1:return S.trys.push([1,3,,4]),[4,v.json()];case 2:return y=S.sent(),[3,4];case 3:return S.sent(),[3,4];case 4:if(this.afterSend&&(y=this.afterSend(v,y)),v.status>=400)throw new pn({url:v.url,status:v.status,data:y});return[2,y]}})})}).catch(function(v){throw new pn(v)})]})})},s.prototype.buildUrl=function(t){var e=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return t&&(e+=t.startsWith("/")?t.substring(1):t),e},s.prototype.serializeQueryParams=function(t){var e=[];for(var n in t)if(t[n]!==null){var o=t[n],i=encodeURIComponent(n);if(Array.isArray(o))for(var l=0,r=o;l<r.length;l++){var c=r[l];e.push(i+"="+encodeURIComponent(c))}else o instanceof Date?e.push(i+"="+encodeURIComponent(o.toISOString())):typeof o!==null&&typeof o=="object"?e.push(i+"="+encodeURIComponent(JSON.stringify(o))):e.push(i+"="+encodeURIComponent(o))}return e.join("&")},s}();const x=new Zs("https://ibhub-pocketbase.fly.dev/"),He=ze(0),gt=ze([]),_t=ze(""),et=ze(!0),Ut=ze(!0);function gn(s,t,e){const n=s.slice();return n[2]=t[e],n}function _n(s,t,e){const n=s.slice();return n[5]=t[e],n}function bn(s){let t,e=s[5]+"",n;return{c(){t=h("div"),n=D(e)},m(o,i){L(o,t,i),d(t,n)},p(o,i){i&1&&e!==(e=o[5]+"")&&ee(n,e)},d(o){o&&O(t)}}}function yn(s){let t;return{c(){t=h("div"),t.textContent="new!",a(t,"class","newposttag svelte-qr7281")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function wn(s){let t,e=s[0].contains,n=[];for(let o=0;o<e.length;o+=1)n[o]=kn(gn(s,e,o));return{c(){t=h("div");for(let o=0;o<n.length;o+=1)n[o].c();a(t,"class","contains svelte-qr7281")},m(o,i){L(o,t,i);for(let l=0;l<n.length;l+=1)n[l].m(t,null)},p(o,i){if(i&1){e=o[0].contains;let l;for(l=0;l<e.length;l+=1){const r=gn(o,e,l);n[l]?n[l].p(r,i):(n[l]=kn(r),n[l].c(),n[l].m(t,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=e.length}},d(o){o&&O(t),Te(n,o)}}}function kn(s){let t,e=s[2]+"",n;return{c(){t=h("span"),n=D(e),a(t,"class","svelte-qr7281")},m(o,i){L(o,t,i),d(t,n)},p(o,i){i&1&&e!==(e=o[2]+"")&&ee(n,e)},d(o){o&&O(t)}}}function Cn(s){let t;return{c(){t=h("div"),t.textContent="[Dead]",a(t,"class","dead svelte-qr7281")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function $s(s){let t,e,n,o,i,l,r,c,u,f,g,m=s[0].name+"",_,w,p,b=s[0].host+"",N,k,C,v,y,S,j=s[0].updates+"",R,T,J,q,se,te,de,G,pe,W,Y,Q,Z,Ce,$,re=s[0].laspost.split(`
`),P=[];for(let I=0;I<re.length;I+=1)P[I]=bn(_n(s,re,I));let U=s[1]&&yn(),z=s[0].contains.length>0&&wn(s),H=s[0].dead&&Cn();return{c(){t=h("div"),e=h("div"),n=h("div"),o=h("div");for(let I=0;I<P.length;I+=1)P[I].c();i=A(),l=h("a"),r=h("img"),f=A(),g=h("div"),_=D(m),w=A(),p=h("div"),N=D(b),k=A(),U&&U.c(),C=A(),z&&z.c(),v=A(),y=h("div"),S=h("strong"),S.textContent="Updates: ",R=D(j),T=A(),J=h("div"),H&&H.c(),q=A(),se=h("div"),te=h("a"),de=D(`visit 
            `),G=Ie("svg"),pe=Ie("path"),Y=A(),Q=h("div"),Z=h("a"),Ce=D("more"),a(o,"class","tooltip svelte-qr7281"),a(r,"loading","lazy"),Ve(r.src,c=s[0].thumb)||a(r,"src",c),a(r,"alt",""),a(r,"class","svelte-qr7281"),a(l,"href",u="#/new?id="+s[0].id),a(l,"class","svelte-qr7281"),a(n,"class","thumb svelte-qr7281"),a(g,"class","title svelte-qr7281"),a(p,"class","hostName svelte-qr7281"),a(y,"class","updates svelte-qr7281"),a(e,"class","card-container"),a(pe,"d","M 41.470703 4.9863281 A 1.50015 1.50015 0 0 0 41.308594 5 L 27.5 5 A 1.50015 1.50015 0 1 0 27.5 8 L 37.878906 8 L 22.439453 23.439453 A 1.50015 1.50015 0 1 0 24.560547 25.560547 L 40 10.121094 L 40 20.5 A 1.50015 1.50015 0 1 0 43 20.5 L 43 6.6894531 A 1.50015 1.50015 0 0 0 41.470703 4.9863281 z M 12.5 8 C 8.3754991 8 5 11.375499 5 15.5 L 5 35.5 C 5 39.624501 8.3754991 43 12.5 43 L 32.5 43 C 36.624501 43 40 39.624501 40 35.5 L 40 25.5 A 1.50015 1.50015 0 1 0 37 25.5 L 37 35.5 C 37 38.003499 35.003499 40 32.5 40 L 12.5 40 C 9.9965009 40 8 38.003499 8 35.5 L 8 15.5 C 8 12.996501 9.9965009 11 12.5 11 L 22.5 11 A 1.50015 1.50015 0 1 0 22.5 8 L 12.5 8 z"),a(G,"fill","var(--button-color)"),a(G,"xmlns","http://www.w3.org/2000/svg"),a(G,"viewBox","0 0 48 48"),a(G,"width","15px"),a(G,"height","15px"),a(te,"target","_blank"),a(te,"href",W=s[0].link),a(te,"class","svelte-qr7281"),a(se,"class","feed-btn svelte-qr7281"),a(Z,"href",$="#/new?id="+s[0].id),a(Z,"class","svelte-qr7281"),a(Q,"class","feed-btn svelte-qr7281"),a(J,"class","card-container feed-btn-container svelte-qr7281"),a(t,"class","card svelte-qr7281"),V(t,"newpost",s[1])},m(I,ae){L(I,t,ae),d(t,e),d(e,n),d(n,o);for(let ne=0;ne<P.length;ne+=1)P[ne].m(o,null);d(n,i),d(n,l),d(l,r),d(e,f),d(e,g),d(g,_),d(e,w),d(e,p),d(p,N),d(e,k),U&&U.m(e,null),d(e,C),z&&z.m(e,null),d(e,v),d(e,y),d(y,S),d(y,R),d(t,T),d(t,J),H&&H.m(J,null),d(J,q),d(J,se),d(se,te),d(te,de),d(te,G),d(G,pe),d(J,Y),d(J,Q),d(Q,Z),d(Z,Ce)},p(I,[ae]){if(ae&1){re=I[0].laspost.split(`
`);let ne;for(ne=0;ne<re.length;ne+=1){const Re=_n(I,re,ne);P[ne]?P[ne].p(Re,ae):(P[ne]=bn(Re),P[ne].c(),P[ne].m(o,null))}for(;ne<P.length;ne+=1)P[ne].d(1);P.length=re.length}ae&1&&!Ve(r.src,c=I[0].thumb)&&a(r,"src",c),ae&1&&u!==(u="#/new?id="+I[0].id)&&a(l,"href",u),ae&1&&m!==(m=I[0].name+"")&&ee(_,m),ae&1&&b!==(b=I[0].host+"")&&ee(N,b),I[1]?U||(U=yn(),U.c(),U.m(e,C)):U&&(U.d(1),U=null),I[0].contains.length>0?z?z.p(I,ae):(z=wn(I),z.c(),z.m(e,v)):z&&(z.d(1),z=null),ae&1&&j!==(j=I[0].updates+"")&&ee(R,j),I[0].dead?H||(H=Cn(),H.c(),H.m(J,q)):H&&(H.d(1),H=null),ae&1&&W!==(W=I[0].link)&&a(te,"href",W),ae&1&&$!==($="#/new?id="+I[0].id)&&a(Z,"href",$),ae&2&&V(t,"newpost",I[1])},i:M,o:M,d(I){I&&O(t),Te(P,I),U&&U.d(),z&&z.d(),H&&H.d()}}}function xs(s,t,e){let{channel:n}=t,{isNew:o}=t;return s.$$set=i=>{"channel"in i&&e(0,n=i.channel),"isNew"in i&&e(1,o=i.isNew)},[n,o]}class eo extends Ae{constructor(t){super(),Pe(this,t,xs,$s,Le,{channel:0,isNew:1})}}function Sn(s,t,e){const n=s.slice();return n[7]=t[e],n}function On(s){let t,e=s[7]+"",n,o,i;function l(){return s[6](s[7])}return{c(){t=h("button"),n=D(e),a(t,"class","svelte-1paaqmw"),V(t,"active",s[2]===!1&&s[3]===s[7])},m(r,c){L(r,t,c),d(t,n),o||(i=K(t,"click",l),o=!0)},p(r,c){s=r,c&1&&e!==(e=s[7]+"")&&ee(n,e),c&13&&V(t,"active",s[2]===!1&&s[3]===s[7])},d(r){r&&O(t),o=!1,i()}}}function to(s){let t,e,n,o,i,l,r,c=s[0],u=[];for(let f=0;f<c.length;f+=1)u[f]=On(Sn(s,c,f));return{c(){t=h("div"),e=h("button"),e.textContent="show inactive",n=A(),o=h("button"),o.textContent="all domains",i=A();for(let f=0;f<u.length;f+=1)u[f].c();a(e,"class","showdead svelte-1paaqmw"),V(e,"active",s[1]),a(o,"class","svelte-1paaqmw"),V(o,"active",s[2]),a(t,"class","filter svelte-1paaqmw")},m(f,g){L(f,t,g),d(t,e),d(t,n),d(t,o),d(t,i);for(let m=0;m<u.length;m+=1)u[m].m(t,null);l||(r=[K(e,"click",s[4]),K(o,"click",s[5])],l=!0)},p(f,[g]){if(g&2&&V(e,"active",f[1]),g&4&&V(o,"active",f[2]),g&13){c=f[0];let m;for(m=0;m<c.length;m+=1){const _=Sn(f,c,m);u[m]?u[m].p(_,g):(u[m]=On(_),u[m].c(),u[m].m(t,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}},i:M,o:M,d(f){f&&O(t),Te(u,f),l=!1,me(r)}}}function no(s,t,e){let n,o,i,l;return ke(s,gt,f=>e(0,n=f)),ke(s,Ut,f=>e(1,o=f)),ke(s,et,f=>e(2,i=f)),ke(s,_t,f=>e(3,l=f)),wt(async()=>{try{if(n.length===0){const f=await x.records.getFullList("channel");ss(gt,n=Array.from(new Set(f.map(g=>g.host))),n)}}catch(f){console.warn("connection error",f)}}),[n,o,i,l,()=>Ut.update(f=>!o),()=>et.update(f=>!0),f=>{_t.update(g=>f),et.update(g=>!1)}]}class vs extends Ae{constructor(t){super(),Pe(this,t,no,to,Le,{})}}function Ln(s,t,e){const n=s.slice();return n[16]=t[e],n}function Pn(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b,N,k;function C(T,J){return T[0]?oo:so}let v=C(s),y=v(s);_=new vs({});let S=s[5],j=[];for(let T=0;T<S.length;T+=1)j[T]=An(Ln(s,S,T));const R=T=>X(j[T],1,1,()=>{j[T]=null});return{c(){t=h("main"),e=h("div"),e.innerHTML='<h1 class="svelte-1wvfe6d">Dashboard</h1>',n=A(),o=h("div"),i=h("button"),i.textContent="New!",l=A(),r=h("button"),y.c(),c=A(),u=h("span"),f=D(s[4]),g=A(),m=h("div"),he(_.$$.fragment),w=A(),p=h("div");for(let T=0;T<j.length;T+=1)j[T].c();a(e,"class","container-header svelte-1wvfe6d"),a(i,"class","updateall svelte-1wvfe6d"),V(i,"loading",s[3]),a(r,"class","updateall svelte-1wvfe6d"),V(r,"loading",s[3]),a(u,"class","result svelte-1wvfe6d"),a(o,"class","container-header-buttons svelte-1wvfe6d"),a(p,"class","container svelte-1wvfe6d"),a(m,"class","main-container svelte-1wvfe6d"),a(t,"class","svelte-1wvfe6d")},m(T,J){L(T,t,J),d(t,e),d(t,n),d(t,o),d(o,i),d(o,l),d(o,r),y.m(r,null),d(o,c),d(o,u),d(u,f),d(t,g),d(t,m),ue(_,m,null),d(m,w),d(m,p);for(let q=0;q<j.length;q+=1)j[q].m(p,null);b=!0,N||(k=[K(i,"click",s[11]),K(r,"click",s[7])],N=!0)},p(T,J){if(J&8&&V(i,"loading",T[3]),v!==(v=C(T))&&(y.d(1),y=v(T),y&&(y.c(),y.m(r,null))),J&8&&V(r,"loading",T[3]),(!b||J&16)&&ee(f,T[4]),J&98){S=T[5];let q;for(q=0;q<S.length;q+=1){const se=Ln(T,S,q);j[q]?(j[q].p(se,J),F(j[q],1)):(j[q]=An(se),j[q].c(),F(j[q],1),j[q].m(p,null))}for(qe(),q=S.length;q<j.length;q+=1)R(q);Ue()}},i(T){if(!b){F(_.$$.fragment,T);for(let J=0;J<S.length;J+=1)F(j[J]);b=!0}},o(T){X(_.$$.fragment,T),j=j.filter(Boolean);for(let J=0;J<j.length;J+=1)X(j[J]);b=!1},d(T){T&&O(t),y.d(),fe(_),Te(j,T),N=!1,me(k)}}}function so(s){let t;return{c(){t=D("update domain")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function oo(s){let t;return{c(){t=D("update all")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function An(s){let t,e;return t=new eo({props:{channel:s[16],isNew:s[6](s[1],s[16].id)}}),{c(){he(t.$$.fragment)},m(n,o){ue(t,n,o),e=!0},p(n,o){const i={};o&32&&(i.channel=n[16]),o&34&&(i.isNew=n[6](n[1],n[16].id)),t.$set(i)},i(n){e||(F(t.$$.fragment,n),e=!0)},o(n){X(t.$$.fragment,n),e=!1},d(n){fe(t,n)}}}function io(s){let t,e,n=!s[2]&&Pn(s);return{c(){n&&n.c(),t=Xe()},m(o,i){n&&n.m(o,i),L(o,t,i),e=!0},p(o,[i]){o[2]?n&&(qe(),X(n,1,1,()=>{n=null}),Ue()):n?(n.p(o,i),i&4&&F(n,1)):(n=Pn(o),n.c(),F(n,1),n.m(t.parentNode,t))},i(o){e||(F(n),e=!0)},o(o){X(n),e=!1},d(o){n&&n.d(o),o&&O(t)}}}function lo(s,t,e){let n,o,i,l,r;ke(s,Ut,k=>e(9,n=k)),ke(s,_t,k=>e(10,o=k)),ke(s,et,k=>e(0,i=k)),ke(s,He,k=>e(12,l=k)),ke(s,gt,k=>e(13,r=k)),window.localStorage.getItem("pocketbase_auth")||Ee("/");const c=(k,C)=>k.find(y=>y.channel===C)!=null;let u=[],f=[],g=!0;wt(async()=>{try{console.log("%c ====","color:yellow"),e(8,u=await x.records.getFullList("channel")),e(1,f=await x.records.getFullList("news")),console.log(f),e(2,g=!1),ss(gt,r=Array.from(new Set(u.map(k=>k.host))),r)}catch(k){console.warn("connection error!",k),Ee("/error")}});let m=!1,_="";const w=k=>{e(4,_=k),setTimeout(()=>{e(4,_="")},3e3)},p=async()=>{var k,C;try{e(3,m=!0),e(4,_=`updating${i?"":` ${o}`}...`);const v=b.map(R=>R.id);console.log("ids",v);const y=(C=(k=JSON.parse(window.localStorage.getItem("pocketbase_auth")))==null?void 0:k.model)==null?void 0:C.id;console.log("localuser:",y);const j=await(await fetch("https://ibhub.fly.dev/api/getnewupsates",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({user:y})})).text();console.log(j),e(8,u=await x.records.getFullList("channel")),e(1,f=await x.records.getFullList("news")),He.update(R=>f.length),e(3,m=!1),w(`updated! ${l>0?`${l} new update${l===1?"":"s"}`:"nothing new right now"}`)}catch(v){console.warn(v),e(3,m=!1),w("error while updating")}};let b=u;const N=()=>Ee("/new");return s.$$.update=()=>{s.$$.dirty&1793&&e(5,b=[...u].reverse().filter(k=>i?!0:k.host===o).filter(k=>n?!0:k.dead===!1))},[i,f,g,m,_,b,c,p,u,n,o,N]}class ro extends Ae{constructor(t){super(),Pe(this,t,lo,io,Le,{})}}function gs(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(e=gs(s[t]))&&(n&&(n+=" "),n+=e);else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function jn(){for(var s,t,e=0,n="";e<arguments.length;)(s=arguments[e++])&&(t=gs(s))&&(n&&(n+=" "),n+=t);return n}const ao=(s,t="")=>{const e=ze(jn(t).split(" ").filter(Boolean)),n=e.subscribe(i=>{Array.isArray(i)&&(i==null?void 0:i.length)&&s.classList.add(...i)}),o=()=>s.classList.remove(...bs(e));return{update:(i="")=>{o(),e.set(jn(i).split(" ").filter(Boolean))},destroy:()=>{o(),n()}}},co=(s,t={})=>{const e=document.createElement("div"),n=(i={})=>{if(typeof i=="string"&&(e.style.cssText=i),typeof i=="object")for(const[l,r]of Object.entries(i))l.startsWith("--")?e.style.setProperty(l,r):e.style[l]=r;s.style.cssText=`
					${s.style.cssText};
					${e.style.cssText};
				`};n(t);const o=()=>{s.style.cssText=s.style.cssText.replace(e.style.cssText,""),e.style.cssText=""};return{update:i=>{o(),n(i)},destroy:o}};function En(s,t,e){const n=s.slice();return n[4]=t[e],n}function Tn(s){let t,e=s[4]+"",n,o;return{c(){t=h("option"),n=D(e),o=A(),t.__value=s[4],t.value=t.__value},m(i,l){L(i,t,l),d(t,n),d(t,o)},p:M,d(i){i&&O(t)}}}function uo(s){let t,e,n,o,i,l=s[1],r=[];for(let c=0;c<l.length;c+=1)r[c]=Tn(En(s,l,c));return{c(){e=A(),n=h("select");for(let c=0;c<r.length;c+=1)r[c].c();a(n,"class","svelte-13f2tfu"),s[0]===void 0&&mt(()=>s[2].call(n))},m(c,u){L(c,e,u),L(c,n,u);for(let f=0;f<r.length;f+=1)r[f].m(n,null);rn(n,s[0]),o||(i=[ln(t=ao.call(null,document.body,s[0])),ln(co.call(null,document.body,fo)),K(n,"change",s[2])],o=!0)},p(c,[u]){if(t&&bt(t.update)&&u&1&&t.update.call(null,c[0]),u&2){l=c[1];let f;for(f=0;f<l.length;f+=1){const g=En(c,l,f);r[f]?r[f].p(g,u):(r[f]=Tn(g),r[f].c(),r[f].m(n,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=l.length}u&3&&rn(n,c[0])},i:M,o:M,d(c){c&&O(e),c&&O(n),Te(r,c),o=!1,me(i)}}}let fo="";function po(s,t,e){let n="yotsuba-nograd";const o=["yotsuba-nograd","yotsuba","yotsuba-b","nograd","bluesky","luckygreen","uboa","plankton"],i=localStorage.getItem("storedTheme");n=i||n;function l(){n=ws(this),e(0,n),e(1,o)}return s.$$.update=()=>{s.$$.dirty&1&&localStorage.setItem("storedTheme",n)},[n,o,l]}class ho extends Ae{constructor(t){super(),Pe(this,t,po,uo,Le,{})}}function Rn(s,t,e){const n=s.slice();return n[2]=t[e],n}function Nn(s){let t;return{c(){t=h("div"),t.textContent="[ NEW !]",a(t,"class","newposttag svelte-szvp27")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function In(s){let t,e=s[2]+"",n;return{c(){t=h("div"),n=D(e)},m(o,i){L(o,t,i),d(t,n)},p(o,i){i&1&&e!==(e=o[2]+"")&&ee(n,e)},d(o){o&&O(t)}}}function mo(s){let t,e,n,o=s[0].created+"",i,l,r,c=s[0].title+"",u,f,g,m,_,w,p,b,N,k,C,v,y,S,j,R,T,J,q,se,te,de,G=s[1]&&Nn(),pe=s[0].content.split(`
`),W=[];for(let Y=0;Y<pe.length;Y+=1)W[Y]=In(Rn(s,pe,Y));return{c(){var Y,Q,Z,Ce,$,re;t=h("div"),e=h("div"),n=h("div"),i=D(o),l=A(),r=h("h2"),u=D(c),f=A(),G&&G.c(),g=A(),m=h("div"),_=h("img"),p=A(),b=h("div");for(let P=0;P<W.length;P+=1)W[P].c();N=A(),k=h("div"),C=h("div"),v=h("div"),y=h("a"),S=D(`visit 
                `),j=Ie("svg"),R=Ie("path"),J=A(),q=h("div"),se=h("a"),te=D("more"),a(n,"class","date svelte-szvp27"),a(r,"class","svelte-szvp27"),a(_,"loading","lazy"),Ve(_.src,w=(Q=(Y=s[0]["@expand"])==null?void 0:Y.channel)==null?void 0:Q.thumb)||a(_,"src",w),a(_,"alt",""),a(_,"class","svelte-szvp27"),a(m,"class","thumb svelte-szvp27"),a(b,"class","channelcontent svelte-szvp27"),a(e,"class","card-container svelte-szvp27"),a(R,"d","M 41.470703 4.9863281 A 1.50015 1.50015 0 0 0 41.308594 5 L 27.5 5 A 1.50015 1.50015 0 1 0 27.5 8 L 37.878906 8 L 22.439453 23.439453 A 1.50015 1.50015 0 1 0 24.560547 25.560547 L 40 10.121094 L 40 20.5 A 1.50015 1.50015 0 1 0 43 20.5 L 43 6.6894531 A 1.50015 1.50015 0 0 0 41.470703 4.9863281 z M 12.5 8 C 8.3754991 8 5 11.375499 5 15.5 L 5 35.5 C 5 39.624501 8.3754991 43 12.5 43 L 32.5 43 C 36.624501 43 40 39.624501 40 35.5 L 40 25.5 A 1.50015 1.50015 0 1 0 37 25.5 L 37 35.5 C 37 38.003499 35.003499 40 32.5 40 L 12.5 40 C 9.9965009 40 8 38.003499 8 35.5 L 8 15.5 C 8 12.996501 9.9965009 11 12.5 11 L 22.5 11 A 1.50015 1.50015 0 1 0 22.5 8 L 12.5 8 z"),a(j,"fill","var(--button-color)"),a(j,"xmlns","http://www.w3.org/2000/svg"),a(j,"viewBox","0 0 48 48"),a(j,"width","15px"),a(j,"height","15px"),a(y,"target","_blank"),a(y,"href",T=(Ce=(Z=s[0]["@expand"])==null?void 0:Z.channel)==null?void 0:Ce.link),a(y,"class","svelte-szvp27"),a(v,"class","feed-btn svelte-szvp27"),a(se,"href",de="#/new?id="+((re=($=s[0]["@expand"])==null?void 0:$.channel)==null?void 0:re.id)),a(se,"class","svelte-szvp27"),a(q,"class","feed-btn svelte-szvp27"),a(C,"class","card-container feed-btn-container svelte-szvp27"),a(k,"class","feed-btn-holder svelte-szvp27"),a(t,"class","card svelte-szvp27"),V(t,"newpost",s[1])},m(Y,Q){L(Y,t,Q),d(t,e),d(e,n),d(n,i),d(e,l),d(e,r),d(r,u),d(e,f),G&&G.m(e,null),d(e,g),d(e,m),d(m,_),d(e,p),d(e,b);for(let Z=0;Z<W.length;Z+=1)W[Z].m(b,null);d(t,N),d(t,k),d(k,C),d(C,v),d(v,y),d(y,S),d(y,j),d(j,R),d(C,J),d(C,q),d(q,se),d(se,te)},p(Y,[Q]){var Z,Ce,$,re,P,U;if(Q&1&&o!==(o=Y[0].created+"")&&ee(i,o),Q&1&&c!==(c=Y[0].title+"")&&ee(u,c),Y[1]?G||(G=Nn(),G.c(),G.m(e,g)):G&&(G.d(1),G=null),Q&1&&!Ve(_.src,w=(Ce=(Z=Y[0]["@expand"])==null?void 0:Z.channel)==null?void 0:Ce.thumb)&&a(_,"src",w),Q&1){pe=Y[0].content.split(`
`);let z;for(z=0;z<pe.length;z+=1){const H=Rn(Y,pe,z);W[z]?W[z].p(H,Q):(W[z]=In(H),W[z].c(),W[z].m(b,null))}for(;z<W.length;z+=1)W[z].d(1);W.length=pe.length}Q&1&&T!==(T=(re=($=Y[0]["@expand"])==null?void 0:$.channel)==null?void 0:re.link)&&a(y,"href",T),Q&1&&de!==(de="#/new?id="+((U=(P=Y[0]["@expand"])==null?void 0:P.channel)==null?void 0:U.id))&&a(se,"href",de),Q&2&&V(t,"newpost",Y[1])},i:M,o:M,d(Y){Y&&O(t),G&&G.d(),Te(W,Y)}}}function vo(s,t,e){let{feed:n}=t,{isNew:o}=t;return console.log(n),s.$$set=i=>{"feed"in i&&e(0,n=i.feed),"isNew"in i&&e(1,o=i.isNew)},[n,o]}class go extends Ae{constructor(t){super(),Pe(this,t,vo,mo,Le,{feed:0,isNew:1})}}function qn(s,t,e){const n=s.slice();return n[13]=t[e],n[15]=e,n}function Un(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b,N,k;_=new vs({});let C=s[1],v=[];for(let S=0;S<C.length;S+=1)v[S]=zn(qn(s,C,S));const y=S=>X(v[S],1,1,()=>{v[S]=null});return{c(){t=h("main"),e=h("h1"),e.textContent="Feed",n=A(),o=h("div"),i=h("button"),i.textContent="mark as read",l=A(),r=h("button"),r.textContent="get RSS",c=A(),u=h("span"),f=D(s[0]),g=A(),m=h("div"),he(_.$$.fragment),w=A(),p=h("div");for(let S=0;S<v.length;S+=1)v[S].c();a(e,"class","svelte-slskqk"),a(i,"class","svelte-slskqk"),a(r,"class","svelte-slskqk"),a(u,"class","result svelte-slskqk"),a(o,"class","feedoptions svelte-slskqk"),a(p,"class","feeds svelte-slskqk"),a(m,"class","container svelte-slskqk"),a(t,"class","svelte-slskqk")},m(S,j){L(S,t,j),d(t,e),d(t,n),d(t,o),d(o,i),d(o,l),d(o,r),d(o,c),d(o,u),d(u,f),d(t,g),d(t,m),ue(_,m,null),d(m,w),d(m,p);for(let R=0;R<v.length;R+=1)v[R].m(p,null);b=!0,N||(k=[K(i,"click",s[6]),K(r,"click",s[7])],N=!0)},p(S,j){if((!b||j&1)&&ee(f,S[0]),j&46){C=S[1];let R;for(R=0;R<C.length;R+=1){const T=qn(S,C,R);v[R]?(v[R].p(T,j),F(v[R],1)):(v[R]=zn(T),v[R].c(),F(v[R],1),v[R].m(p,null))}for(qe(),R=C.length;R<v.length;R+=1)y(R);Ue()}},i(S){if(!b){F(_.$$.fragment,S);for(let j=0;j<C.length;j+=1)F(v[j]);b=!0}},o(S){X(_.$$.fragment,S),v=v.filter(Boolean);for(let j=0;j<v.length;j+=1)X(v[j]);b=!1},d(S){S&&O(t),fe(_),Te(v,S),N=!1,me(k)}}}function zn(s){let t,e;return t=new go({props:{feed:s[13],isNew:s[5](s[2],s[13].id)&&!s[3]}}),{c(){he(t.$$.fragment)},m(n,o){ue(t,n,o),e=!0},p(n,o){const i={};o&2&&(i.feed=n[13]),o&14&&(i.isNew=n[5](n[2],n[13].id)&&!n[3]),t.$set(i)},i(n){e||(F(t.$$.fragment,n),e=!0)},o(n){X(t.$$.fragment,n),e=!1},d(n){fe(t,n)}}}function _o(s){let t,e,n=!s[4]&&Un(s);return{c(){n&&n.c(),t=Xe()},m(o,i){n&&n.m(o,i),L(o,t,i),e=!0},p(o,[i]){o[4]?n&&(qe(),X(n,1,1,()=>{n=null}),Ue()):n?(n.p(o,i),i&16&&F(n,1)):(n=Un(o),n.c(),F(n,1),n.m(t.parentNode,t))},i(o){e||(F(n),e=!0)},o(o){X(n),e=!1},d(o){n&&n.d(o),o&&O(t)}}}function bo(s,t,e){let n,o;ke(s,_t,b=>e(9,n=b)),ke(s,et,b=>e(10,o=b)),window.localStorage.getItem("pocketbase_auth")||Ee("/");let i=window.localStorage.getItem("pocketbase_auth")?JSON.parse(window.localStorage.getItem("pocketbase_auth")):!1,l="";const r=b=>{e(0,l=b),setTimeout(()=>{e(0,l="")},3e3)},c=(b,N)=>(console.log("%c ====","color:red"),console.log(b,N),b.find(C=>C.feeds===N)!=null);let u=[],f=u,g=[],m=!1,_=!0;const w=async()=>{try{const b=await Promise.all(g.map(async N=>{x.records.delete("news",N.id)}));console.log(b),He.update(N=>0),e(3,m=!0),r("nothing new")}catch(b){console.error(b)}},p=async()=>{try{const b=await await(await fetch(`https://ibhub.fly.dev/api/getrsslink/${i.model.id}`)).json();if(!b.error)console.log(b.rss),await navigator.clipboard.writeText(b.rss),r("rss link copied to clipboard");else throw b.error}catch(b){console.error(b)}};return wt(async()=>{try{e(8,u=await x.records.getFullList("feeditem",50,{expand:"channel",sort:"-created"})),e(2,g=await x.records.getFullList("news")),console.log(u,g),e(4,_=!1)}catch(b){console.warn("connection error",b),Ee("/error")}}),s.$$.update=()=>{s.$$.dirty&1792&&(console.log(u),u.length>0&&e(1,f=[...u].filter(b=>{var N,k;return o||((k=(N=b["@expand"])==null?void 0:N.channel)==null?void 0:k.host)===n})))},[l,f,g,m,_,c,w,p,u,n,o]}class yo extends Ae{constructor(t){super(),Pe(this,t,bo,_o,Le,{})}}const wo="/assets/archiveph.png";const ko=s=>({}),Dn=s=>({}),Co=s=>({}),Mn=s=>({});function So(s){let t,e,n,o,i,l,r,c,u;const f=s[2].name,g=en(f,s,s[1],Mn),m=s[2].content,_=en(m,s,s[1],Dn);return{c(){t=h("div"),g&&g.c(),e=A(),n=h("button"),n.textContent="?",o=A(),i=h("div"),l=h("div"),_&&_.c(),a(n,"class","hastooltip svelte-1rv76k"),V(n,"active",s[0]),a(l,"class","content svelte-1rv76k"),a(i,"class","container svelte-1rv76k"),V(i,"active",s[0]),a(t,"class","box")},m(w,p){L(w,t,p),g&&g.m(t,null),d(t,e),d(t,n),d(t,o),d(t,i),d(i,l),_&&_.m(l,null),r=!0,c||(u=K(n,"click",s[3]),c=!0)},p(w,[p]){g&&g.p&&(!r||p&2)&&nn(g,f,w,w[1],r?tn(f,w[1],p,Co):sn(w[1]),Mn),p&1&&V(n,"active",w[0]),_&&_.p&&(!r||p&2)&&nn(_,m,w,w[1],r?tn(m,w[1],p,ko):sn(w[1]),Dn),p&1&&V(i,"active",w[0])},i(w){r||(F(g,w),F(_,w),r=!0)},o(w){X(g,w),X(_,w),r=!1},d(w){w&&O(t),g&&g.d(w),_&&_.d(w),c=!1,u()}}}function Oo(s,t,e){let{$$slots:n={},$$scope:o}=t,i=!1;const l=r=>{r.preventDefault(),e(0,i=!i)};return s.$$set=r=>{"$$scope"in r&&e(1,o=r.$$scope)},[i,o,n,l]}class $e extends Ae{constructor(t){super(),Pe(this,t,Oo,So,Le,{})}}function Fn(s,t,e){const n=s.slice();return n[37]=t[e],n}function Jn(s,t,e){const n=s.slice();return n[40]=t[e],n}function Lo(s){let t;return{c(){t=h("h1"),t.textContent="New!",a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Po(s){let t;return{c(){t=h("h1"),t.textContent="Updating!",a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Bn(s){let t,e,n,o=s[1].id+"",i;return{c(){t=h("div"),e=h("strong"),n=D("Id: "),i=D(o),a(e,"class","svelte-1onif8i"),a(t,"class","id svelte-1onif8i")},m(l,r){L(l,t,r),d(t,e),d(e,n),d(e,i)},p(l,r){r[0]&2&&o!==(o=l[1].id+"")&&ee(i,o)},d(l){l&&O(t)}}}function Ao(s){let t;return{c(){t=h("span"),t.textContent="target selector*",a(t,"slot","name"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function jo(s){let t;return{c(){t=h("span"),t.innerHTML=`A valid CSS selector string to be the target of observation, the updates are based on changes of this element, so anytime the text on it changes, you get a new update.<br class="svelte-1onif8i"/>
				Example &quot;.post&quot;<br class="svelte-1onif8i"/><br class="svelte-1onif8i"/>
				You can learn more about CSS selectors <a class="tooltiplink svelte-1onif8i" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" target="_blank">here</a>`,a(t,"slot","content"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function Eo(s){let t;return{c(){t=h("span"),t.textContent="keywords",a(t,"slot","name"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function To(s){let t;return{c(){t=h("span"),t.innerHTML=`Filter the updates with only the ones that contains words listed here, you can have more than one word separated by &quot;,&quot; without spaces<br class="svelte-1onif8i"/>
				Example: &quot;41234,foo,hello world&quot;<br class="svelte-1onif8i"/>
				If left blank, it will update on any change regradless.`,a(t,"slot","content"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function Ro(s){let t;return{c(){t=h("span"),t.textContent="cover",a(t,"slot","name"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function No(s){let t;return{c(){t=h("span"),t.textContent="A url of an image",a(t,"slot","content"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function Io(s){let t;return{c(){t=h("span"),t.textContent="newest post on top",a(t,"slot","name"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function qo(s){let t;return{c(){t=h("span"),t.textContent="When marked, the updates will check the newest content from the top of the page (like a blog or twitter), instead of bottom of the page",a(t,"slot","content"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function Gn(s){let t,e,n,o,i,l,r;return o=new $e({props:{$$slots:{content:[zo],name:[Uo]},$$scope:{ctx:s}}}),{c(){t=h("div"),e=h("input"),n=A(),he(o.$$.fragment),a(e,"id","dead"),a(e,"type","checkbox"),a(e,"class","svelte-1onif8i"),a(t,"class","select-holder svelte-1onif8i")},m(c,u){L(c,t,u),d(t,e),e.checked=s[1].dead,d(t,n),ue(o,t,null),i=!0,l||(r=K(e,"change",s[25]),l=!0)},p(c,u){u[0]&2&&(e.checked=c[1].dead);const f={};u[1]&4096&&(f.$$scope={dirty:u,ctx:c}),o.$set(f)},i(c){i||(F(o.$$.fragment,c),i=!0)},o(c){X(o.$$.fragment,c),i=!1},d(c){c&&O(t),fe(o),l=!1,r()}}}function Uo(s){let t;return{c(){t=h("span"),t.textContent="dead",a(t,"slot","name"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function zo(s){let t;return{c(){t=h("span"),t.textContent="When marked, the updates will not check any changes on this page anymore",a(t,"slot","content"),a(t,"class","svelte-1onif8i")},m(e,n){L(e,t,n)},p:M,d(e){e&&O(t)}}}function Vn(s){let t;return{c(){t=h("div"),t.textContent="Are you sure?",a(t,"class","deleteconfirm svelte-1onif8i")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Do(s){let t,e,n,o,i;return{c(){t=h("button"),t.textContent="New!",e=A(),n=h("button"),n.textContent="Clear!",a(t,"type","button"),a(t,"class","svelte-1onif8i"),a(n,"type","button"),a(n,"class","svelte-1onif8i")},m(l,r){L(l,t,r),L(l,e,r),L(l,n,r),o||(i=[K(t,"click",s[13]),K(n,"click",s[11])],o=!0)},p:M,d(l){l&&O(t),l&&O(e),l&&O(n),o=!1,me(i)}}}function Mo(s){let t,e,n,o,i;return{c(){t=h("button"),t.textContent="Save!",e=A(),n=h("button"),n.textContent="Delete!",a(t,"type","button"),a(t,"class","svelte-1onif8i"),a(n,"type","button"),a(n,"class","svelte-1onif8i")},m(l,r){L(l,t,r),L(l,e,r),L(l,n,r),o||(i=[K(t,"click",s[12]),K(n,"click",s[27])],o=!0)},p:M,d(l){l&&O(t),l&&O(e),l&&O(n),o=!1,me(i)}}}function Fo(s){let t,e,n,o,i;return{c(){t=h("button"),t.textContent="No",e=A(),n=h("button"),n.textContent="Yes",a(t,"type","button"),a(t,"class","svelte-1onif8i"),a(n,"type","button"),a(n,"class","svelte-1onif8i")},m(l,r){L(l,t,r),L(l,e,r),L(l,n,r),o||(i=[K(t,"click",s[26]),K(n,"click",s[14])],o=!0)},p:M,d(l){l&&O(t),l&&O(e),l&&O(n),o=!1,me(i)}}}function Wn(s){let t,e;return{c(){t=h("img"),Ve(t.src,e=s[1].thumb)||a(t,"src",e),a(t,"alt","data.name"),a(t,"class","svelte-1onif8i")},m(n,o){L(n,t,o)},p(n,o){o[0]&2&&!Ve(t.src,e=n[1].thumb)&&a(t,"src",e)},d(n){n&&O(t)}}}function Kn(s){let t;return{c(){t=h("span"),t.textContent="[Dead]",a(t,"class","dead svelte-1onif8i")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Yn(s){let t,e=s[1].contains,n=[];for(let o=0;o<e.length;o+=1)n[o]=Hn(Jn(s,e,o));return{c(){t=h("div");for(let o=0;o<n.length;o+=1)n[o].c();a(t,"class","contains svelte-1onif8i")},m(o,i){L(o,t,i);for(let l=0;l<n.length;l+=1)n[l].m(t,null)},p(o,i){if(i[0]&2){e=o[1].contains;let l;for(l=0;l<e.length;l+=1){const r=Jn(o,e,l);n[l]?n[l].p(r,i):(n[l]=Hn(r),n[l].c(),n[l].m(t,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=e.length}},d(o){o&&O(t),Te(n,o)}}}function Hn(s){let t,e=s[40]+"",n;return{c(){t=h("span"),n=D(e),a(t,"class","svelte-1onif8i")},m(o,i){L(o,t,i),d(t,n)},p(o,i){i[0]&2&&e!==(e=o[40]+"")&&ee(n,e)},d(o){o&&O(t)}}}function Xn(s){let t,e,n=s[1].updates+"",o;return{c(){t=h("div"),e=D("Updates: "),o=D(n),a(t,"class","replies svelte-1onif8i")},m(i,l){L(i,t,l),d(t,e),d(t,o)},p(i,l){l[0]&2&&n!==(n=i[1].updates+"")&&ee(o,n)},d(i){i&&O(t)}}}function Qn(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b=s[1].id!=""&&Zn(s);return{c(){t=h("div"),b&&b.c(),e=A(),n=h("a"),o=D(`visit 
							`),i=Ie("svg"),l=Ie("path"),c=A(),u=h("a"),f=h("img"),m=D(` archive.ph
							`),_=Ie("svg"),w=Ie("path"),a(l,"d","M 41.470703 4.9863281 A 1.50015 1.50015 0 0 0 41.308594 5 L 27.5 5 A 1.50015 1.50015 0 1 0 27.5 8 L 37.878906 8 L 22.439453 23.439453 A 1.50015 1.50015 0 1 0 24.560547 25.560547 L 40 10.121094 L 40 20.5 A 1.50015 1.50015 0 1 0 43 20.5 L 43 6.6894531 A 1.50015 1.50015 0 0 0 41.470703 4.9863281 z M 12.5 8 C 8.3754991 8 5 11.375499 5 15.5 L 5 35.5 C 5 39.624501 8.3754991 43 12.5 43 L 32.5 43 C 36.624501 43 40 39.624501 40 35.5 L 40 25.5 A 1.50015 1.50015 0 1 0 37 25.5 L 37 35.5 C 37 38.003499 35.003499 40 32.5 40 L 12.5 40 C 9.9965009 40 8 38.003499 8 35.5 L 8 15.5 C 8 12.996501 9.9965009 11 12.5 11 L 22.5 11 A 1.50015 1.50015 0 1 0 22.5 8 L 12.5 8 z"),a(l,"class","svelte-1onif8i"),a(i,"fill","var(--button-color)"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"viewBox","0 0 48 48"),a(i,"width","15px"),a(i,"height","15px"),a(i,"class","svelte-1onif8i"),a(n,"class","btn-link svelte-1onif8i"),a(n,"target","_blank"),a(n,"href",r=s[1].link),a(f,"alt",""),Ve(f.src,g=wo)||a(f,"src",g),a(f,"class","svelte-1onif8i"),a(w,"d","M 41.470703 4.9863281 A 1.50015 1.50015 0 0 0 41.308594 5 L 27.5 5 A 1.50015 1.50015 0 1 0 27.5 8 L 37.878906 8 L 22.439453 23.439453 A 1.50015 1.50015 0 1 0 24.560547 25.560547 L 40 10.121094 L 40 20.5 A 1.50015 1.50015 0 1 0 43 20.5 L 43 6.6894531 A 1.50015 1.50015 0 0 0 41.470703 4.9863281 z M 12.5 8 C 8.3754991 8 5 11.375499 5 15.5 L 5 35.5 C 5 39.624501 8.3754991 43 12.5 43 L 32.5 43 C 36.624501 43 40 39.624501 40 35.5 L 40 25.5 A 1.50015 1.50015 0 1 0 37 25.5 L 37 35.5 C 37 38.003499 35.003499 40 32.5 40 L 12.5 40 C 9.9965009 40 8 38.003499 8 35.5 L 8 15.5 C 8 12.996501 9.9965009 11 12.5 11 L 22.5 11 A 1.50015 1.50015 0 1 0 22.5 8 L 12.5 8 z"),a(w,"class","svelte-1onif8i"),a(_,"fill","var(--button-color)"),a(_,"xmlns","http://www.w3.org/2000/svg"),a(_,"viewBox","0 0 48 48"),a(_,"width","15px"),a(_,"height","15px"),a(_,"class","svelte-1onif8i"),a(u,"class","btn-link svelte-1onif8i"),a(u,"target","_blank"),a(u,"href",p="https://archive.today/?run=1&url="+s[1].link),a(t,"class","btn-links-holder svelte-1onif8i")},m(N,k){L(N,t,k),b&&b.m(t,null),d(t,e),d(t,n),d(n,o),d(n,i),d(i,l),d(t,c),d(t,u),d(u,f),d(u,m),d(u,_),d(_,w)},p(N,k){N[1].id!=""?b?b.p(N,k):(b=Zn(N),b.c(),b.m(t,e)):b&&(b.d(1),b=null),k[0]&2&&r!==(r=N[1].link)&&a(n,"href",r),k[0]&2&&p!==(p="https://archive.today/?run=1&url="+N[1].link)&&a(u,"href",p)},d(N){N&&O(t),b&&b.d()}}}function Zn(s){let t,e,n;function o(r,c){return r[9]?Bo:Jo}let i=o(s),l=i(s);return{c(){t=h("button"),l.c(),a(t,"class","btn-link svelte-1onif8i"),V(t,"updatingsingle",s[9])},m(r,c){L(r,t,c),l.m(t,null),e||(n=K(t,"click",s[28]),e=!0)},p(r,c){i!==(i=o(r))&&(l.d(1),l=i(r),l&&(l.c(),l.m(t,null))),c[0]&512&&V(t,"updatingsingle",r[9])},d(r){r&&O(t),l.d(),e=!1,n()}}}function Jo(s){let t;return{c(){t=D("check for updates")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Bo(s){let t;return{c(){t=D("checking...")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function $n(s){let t,e,n,o,i,l=s[1].laspost.split(`
`),r=[];for(let c=0;c<l.length;c+=1)r[c]=xn(Fn(s,l,c));return{c(){t=h("div"),e=h("div"),n=h("h4"),n.textContent="Last update:",o=A(),i=h("div");for(let c=0;c<r.length;c+=1)r[c].c();a(n,"class","data-content svelte-1onif8i"),a(i,"class","status-text svelte-1onif8i"),a(e,"class","status-content svelte-1onif8i"),a(t,"class","svelte-1onif8i"),V(t,"newpost",s[5].find(s[29])||s[8])},m(c,u){L(c,t,u),d(t,e),d(e,n),d(e,o),d(e,i);for(let f=0;f<r.length;f+=1)r[f].m(i,null)},p(c,u){if(u[0]&2){l=c[1].laspost.split(`
`);let f;for(f=0;f<l.length;f+=1){const g=Fn(c,l,f);r[f]?r[f].p(g,u):(r[f]=xn(g),r[f].c(),r[f].m(i,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=l.length}u[0]&290&&V(t,"newpost",c[5].find(c[29])||c[8])},d(c){c&&O(t),Te(r,c)}}}function xn(s){let t,e=s[37]+"",n;return{c(){t=h("div"),n=D(e),a(t,"class","svelte-1onif8i")},m(o,i){L(o,t,i),d(t,n)},p(o,i){i[0]&2&&e!==(e=o[37]+"")&&ee(n,e)},d(o){o&&O(t)}}}function Go(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b,N,k,C,v,y,S,j,R,T,J,q,se,te,de,G,pe,W,Y,Q,Z,Ce,$,re,P,U,z,H,I,ae,ne,Re,Bt,We,De,Ct,oe,St,nt,st=s[1].name+"",Ot,Gt,ot,it=s[1].host+"",Lt,Vt,Pt,At,Wt,Me,jt,Ke,lt,rt,Et,Fe,Tt,Kt;function Yt(E,B){return E[1].id!=""?Po:Lo}let at=Yt(s),Ne=at(s),ve=s[1].id!=""&&Bn(s);w=new $e({props:{$$slots:{content:[jo],name:[Ao]},$$scope:{ctx:s}}}),T=new $e({props:{$$slots:{content:[To],name:[Eo]},$$scope:{ctx:s}}}),G=new $e({props:{$$slots:{content:[No],name:[Ro]},$$scope:{ctx:s}}}),H=new $e({props:{$$slots:{content:[qo],name:[Io]},$$scope:{ctx:s}}});let ie=s[1].id!=""&&Gn(s),Se=s[7]&&Vn();function Ht(E,B){return E[7]?Fo:E[1].id!=""?Mo:Do}let ct=Ht(s),je=ct(s),ge=s[1].thumb!=""&&Wn(s),Oe=s[1].dead&&Kn(),_e=s[1].contains.length>0&&Yn(s),be=s[1].id!=""&&Xn(s),ye=s[3]&&Qn(s),we=s[1].laspost!=""&&$n(s);return{c(){t=h("main"),e=h("div"),Ne.c(),n=A(),o=h("section"),i=h("form"),ve&&ve.c(),l=A(),r=h("div"),c=h("div"),c.textContent="url*",u=A(),f=h("input"),g=A(),m=h("div"),_=h("div"),he(w.$$.fragment),p=A(),b=h("input"),N=A(),k=h("div"),C=h("div"),C.textContent="title*",v=A(),y=h("input"),S=A(),j=h("div"),R=h("div"),he(T.$$.fragment),J=A(),q=h("input"),se=A(),te=h("div"),de=h("div"),he(G.$$.fragment),pe=A(),W=h("input"),Y=A(),Q=h("div"),Z=h("div"),Z.textContent="Extra information",Ce=A(),$=h("textarea"),re=A(),P=h("div"),U=h("input"),z=A(),he(H.$$.fragment),I=A(),ie&&ie.c(),ae=A(),Se&&Se.c(),ne=A(),Re=h("div"),je.c(),Bt=A(),We=h("div"),De=h("div"),ge&&ge.c(),Ct=A(),oe=h("div"),Oe&&Oe.c(),St=A(),nt=h("h3"),Ot=D(st),Gt=A(),ot=h("div"),Lt=D(it),Vt=A(),_e&&_e.c(),Pt=A(),be&&be.c(),At=A(),ye&&ye.c(),Wt=A(),Me=h("div"),we&&we.c(),jt=A(),Ke=h("div"),lt=h("div"),rt=h("div"),Et=D(s[4]),a(e,"class","container-header svelte-1onif8i"),a(c,"class","labelholder svelte-1onif8i"),a(c,"for","link"),a(f,"id","link"),a(f,"placeholder","https://en.wikipedia.org/wiki/Main_Page*"),a(f,"class","svelte-1onif8i"),a(r,"class","svelte-1onif8i"),a(_,"class","labelholder svelte-1onif8i"),a(_,"for","observeName"),a(b,"id","observeName"),a(b,"placeholder",".post*"),a(b,"class","svelte-1onif8i"),a(m,"class","svelte-1onif8i"),a(C,"class","labelholder svelte-1onif8i"),a(C,"for","name"),a(y,"id","name"),a(y,"placeholder","Title"),a(y,"class","svelte-1onif8i"),a(k,"class","svelte-1onif8i"),a(R,"class","labelholder svelte-1onif8i"),a(R,"for","containsstr"),a(q,"id","containsstr"),a(q,"placeholder","foo,123,hello world,41234"),a(q,"class","svelte-1onif8i"),a(j,"class","svelte-1onif8i"),a(de,"class","labelholder svelte-1onif8i"),a(de,"for","thumb"),a(W,"id","thumb"),a(W,"placeholder","https://validwebsite.com/image.png"),a(W,"class","svelte-1onif8i"),a(te,"class","svelte-1onif8i"),a(Z,"class","labelholder svelte-1onif8i"),a(Z,"for","meta"),a($,"id","meta"),a($,"placeholder","Any extra info goes here"),a($,"class","svelte-1onif8i"),a(Q,"class","svelte-1onif8i"),a(U,"id","newestOnTop"),a(U,"type","checkbox"),a(U,"class","svelte-1onif8i"),a(P,"class","select-holder svelte-1onif8i"),a(Re,"class","form-btns-holder svelte-1onif8i"),a(i,"class","svelte-1onif8i"),a(nt,"class","svelte-1onif8i"),a(ot,"class","hostName svelte-1onif8i"),a(oe,"class","postdata svelte-1onif8i"),a(De,"class","thumb svelte-1onif8i"),a(rt,"class","status-text svelte-1onif8i"),a(lt,"class","status-content svelte-1onif8i"),a(Ke,"class","status-box svelte-1onif8i"),V(Ke,"statusActive",s[6]),a(Me,"class","status svelte-1onif8i"),a(We,"class","thumb-holder svelte-1onif8i"),a(o,"class","new-section svelte-1onif8i"),V(o,"btnActive",s[2]),a(t,"class","svelte-1onif8i")},m(E,B){L(E,t,B),d(t,e),Ne.m(e,null),d(t,n),d(t,o),d(o,i),ve&&ve.m(i,null),d(i,l),d(i,r),d(r,c),d(r,u),d(r,f),ce(f,s[1].link),d(i,g),d(i,m),d(m,_),ue(w,_,null),d(m,p),d(m,b),ce(b,s[1].observeName),d(i,N),d(i,k),d(k,C),d(k,v),d(k,y),ce(y,s[1].name),d(i,S),d(i,j),d(j,R),ue(T,R,null),d(j,J),d(j,q),ce(q,s[0]),d(i,se),d(i,te),d(te,de),ue(G,de,null),d(te,pe),d(te,W),ce(W,s[1].thumb),d(i,Y),d(i,Q),d(Q,Z),d(Q,Ce),d(Q,$),ce($,s[1].meta),d(i,re),d(i,P),d(P,U),U.checked=s[1].newestOnTop,d(P,z),ue(H,P,null),d(i,I),ie&&ie.m(i,null),d(i,ae),Se&&Se.m(i,null),d(i,ne),d(i,Re),je.m(Re,null),d(o,Bt),d(o,We),d(We,De),ge&&ge.m(De,null),d(De,Ct),d(De,oe),Oe&&Oe.m(oe,null),d(oe,St),d(oe,nt),d(nt,Ot),d(oe,Gt),d(oe,ot),d(ot,Lt),d(oe,Vt),_e&&_e.m(oe,null),d(oe,Pt),be&&be.m(oe,null),d(oe,At),ye&&ye.m(oe,null),d(We,Wt),d(We,Me),we&&we.m(Me,null),d(Me,jt),d(Me,Ke),d(Ke,lt),d(lt,rt),d(rt,Et),Fe=!0,Tt||(Kt=[K(f,"input",s[16]),K(f,"input",s[17]),K(f,"change",s[18]),K(b,"input",s[19]),K(y,"input",s[20]),K(q,"input",s[21]),K(W,"input",s[22]),K($,"input",s[23]),K(U,"change",s[24])],Tt=!0)},p(E,B){at!==(at=Yt(E))&&(Ne.d(1),Ne=at(E),Ne&&(Ne.c(),Ne.m(e,null))),E[1].id!=""?ve?ve.p(E,B):(ve=Bn(E),ve.c(),ve.m(i,l)):ve&&(ve.d(1),ve=null),B[0]&2&&f.value!==E[1].link&&ce(f,E[1].link);const Xt={};B[1]&4096&&(Xt.$$scope={dirty:B,ctx:E}),w.$set(Xt),B[0]&2&&b.value!==E[1].observeName&&ce(b,E[1].observeName),B[0]&2&&y.value!==E[1].name&&ce(y,E[1].name);const Qt={};B[1]&4096&&(Qt.$$scope={dirty:B,ctx:E}),T.$set(Qt),B[0]&1&&q.value!==E[0]&&ce(q,E[0]);const Zt={};B[1]&4096&&(Zt.$$scope={dirty:B,ctx:E}),G.$set(Zt),B[0]&2&&W.value!==E[1].thumb&&ce(W,E[1].thumb),B[0]&2&&ce($,E[1].meta),B[0]&2&&(U.checked=E[1].newestOnTop);const $t={};B[1]&4096&&($t.$$scope={dirty:B,ctx:E}),H.$set($t),E[1].id!=""?ie?(ie.p(E,B),B[0]&2&&F(ie,1)):(ie=Gn(E),ie.c(),F(ie,1),ie.m(i,ae)):ie&&(qe(),X(ie,1,1,()=>{ie=null}),Ue()),E[7]?Se||(Se=Vn(),Se.c(),Se.m(i,ne)):Se&&(Se.d(1),Se=null),ct===(ct=Ht(E))&&je?je.p(E,B):(je.d(1),je=ct(E),je&&(je.c(),je.m(Re,null))),E[1].thumb!=""?ge?ge.p(E,B):(ge=Wn(E),ge.c(),ge.m(De,Ct)):ge&&(ge.d(1),ge=null),E[1].dead?Oe||(Oe=Kn(),Oe.c(),Oe.m(oe,St)):Oe&&(Oe.d(1),Oe=null),(!Fe||B[0]&2)&&st!==(st=E[1].name+"")&&ee(Ot,st),(!Fe||B[0]&2)&&it!==(it=E[1].host+"")&&ee(Lt,it),E[1].contains.length>0?_e?_e.p(E,B):(_e=Yn(E),_e.c(),_e.m(oe,Pt)):_e&&(_e.d(1),_e=null),E[1].id!=""?be?be.p(E,B):(be=Xn(E),be.c(),be.m(oe,At)):be&&(be.d(1),be=null),E[3]?ye?ye.p(E,B):(ye=Qn(E),ye.c(),ye.m(oe,null)):ye&&(ye.d(1),ye=null),E[1].laspost!=""?we?we.p(E,B):(we=$n(E),we.c(),we.m(Me,jt)):we&&(we.d(1),we=null),(!Fe||B[0]&16)&&ee(Et,E[4]),B[0]&64&&V(Ke,"statusActive",E[6]),B[0]&4&&V(o,"btnActive",E[2])},i(E){Fe||(F(w.$$.fragment,E),F(T.$$.fragment,E),F(G.$$.fragment,E),F(H.$$.fragment,E),F(ie),Fe=!0)},o(E){X(w.$$.fragment,E),X(T.$$.fragment,E),X(G.$$.fragment,E),X(H.$$.fragment,E),X(ie),Fe=!1},d(E){E&&O(t),Ne.d(),ve&&ve.d(),fe(w),fe(T),fe(G),fe(H),ie&&ie.d(),Se&&Se.d(),je.d(),ge&&ge.d(),Oe&&Oe.d(),_e&&_e.d(),be&&be.d(),ye&&ye.d(),we&&we.d(),Tt=!1,me(Kt)}}}function Vo(s,t,e){let n;ke(s,Ns,P=>e(30,n=P));const o=window.localStorage.getItem("pocketbase_auth");let i=o?JSON.parse(o):!1,l=!1,r=!1,c="",u="Creating new",f=[],g=!1,m=!1,_=!1;const w=new URLSearchParams(n);let p={id:"",name:"",link:"",host:"",observeName:"",contains:[],newestOnTop:!1,thumb:"",dead:!1,laspost:"",meta:"",updates:1};const b={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"};let N=!1;const k=P=>{e(9,N=!0),(async()=>{console.log(p.dead);const z=await(await fetch("https://ibhub.fly.dev/api/getnewupsates",{...b,body:JSON.stringify({ids:[P],ignoredead:!0,dead:p.dead})})).json();console.log(z),e(9,N=!1),z.channels[0].laspost!=p.laspost&&(e(1,p=z.channels[0]),e(8,_=!0))})()},C=P=>{try{if(P==="")throw"empty selector";return document.querySelector(P),!0}catch(U){console.warn(U)}return!1},v=P=>{try{return new URL(P),!0}catch(U){console.warn(U)}return!1};function y(){e(1,p.id="",p),e(1,p.name="",p),e(1,p.link="",p),e(1,p.observeName="",p),e(1,p.contains=[],p),e(1,p.newestOnTop=!1,p),e(1,p.thumb="",p),e(1,p.dead=!1,p),e(1,p.meta="",p),e(1,p.laspost="",p),e(1,p.host="",p),e(6,g=!1)}async function S(){try{if(console.log(p),e(6,g=!0),e(4,u="posting..."),e(2,l=!1),p.name==="")throw"empty name";if(!r)throw"invalid url";if(!C(p.observeName))throw"invalid selector";e(1,p.host=new URL(p.link).hostname,p);const P=await x.records.update("channel",p.id,p);P&&(console.log(P),e(6,g=!0),e(4,u=`${p.id} updated!`),e(2,l=!0))}catch(P){return console.warn(P),e(6,g=!0),e(4,u=`error updating, ${P}`),e(2,l=!0),!1}}async function j(){try{if(p.name==="")throw"empty name";if(!r)throw"invalid url";if(!C(p.observeName))throw"invalid selector";e(1,p.host=new URL(p.link).hostname,p),e(6,g=!0),e(4,u="creating..."),e(2,l=!1),delete p.id,console.log("sending...",p);const P=await x.records.create("channel",{...p,user:i.model.id});if(P){console.log(P),e(1,p.id=P.id,p);const U=[];U.push(p.id),e(6,g=!0),e(4,u="updating...");const z=await fetch("https://ibhub.fly.dev/api/getnewupsates",{...b,body:JSON.stringify({ids:U})});console.log(z);const H=await x.records.getFullList("news");He.update(I=>H.length),e(6,g=!0),e(4,u="New target created!"),e(2,l=!0),Ee(`/new?id=${P.id}`)}}catch(P){return console.warn(P),e(4,u=`error updating, ${P}`),e(2,l=!0),!1}}async function R(){e(6,g=!0),e(4,u="deleting..."),e(2,l=!1);const P=await x.records.delete("channel",p.id);console.log(P),y(),e(4,u=`${p.id} deleted`),e(2,l=!0),e(7,m=!1),setTimeout(()=>{Ee("/")},1e3)}async function T(P){if(console.log(P),r){e(6,g=!0),e(4,u="checking url...");let U=null;const z=await x.records.getList("channel",1,1,{filter:`host = "${new URL(P).hostname}"`,sort:"-created"});if(z&&z.items.length>0){const I=z.items[0];e(1,p.observeName=(I==null?void 0:I.observeName)===""?p.observeName:I==null?void 0:I.observeName,p),e(1,p.newestOnTop=I==null?void 0:I.newestOnTop,p),U=I==null?void 0:I.thumb}e(4,u="trying metadata...");const H=await fetch("https://ibhub.fly.dev/api/trymeta",{...b,body:JSON.stringify({link:p.link})});if(H.ok){const I=await H.json();console.log(I),e(1,p.name=I.name===""?p.name:I.name,p),e(1,p.thumb=I.thumb===""?U||p.thumb:I.thumb,p),e(4,u=I.name!=""||I.thumb!=""?"fetched metadata from url":"metadata not available")}else e(4,u="page is not available right now")}}wt(async()=>{for(const P in p)w.get(P)&&(typeof p[P]=="string"?e(1,p[P]=w.get(P),p):typeof p[P]=="boolean"?e(1,p[P]=w.get(P)==="true",p):typeof p[P]=="object"&&e(1,p[P]=w.get(P).split(","),p));if(w.get("id"))try{e(6,g=!0),e(4,u="fetching data...");const P=await x.records.getOne("channel",w.get("id"));if(console.log(w.get("id")),P){console.log(P);for(const U in p)e(1,p[U]=P[U],p);e(6,g=!1),e(0,c=p.contains.toString()),e(5,f=await x.records.getFullList("news")),console.log(P)}else e(4,u="Url id not found"),y(),Ee("/new")}catch(P){console.warn(P),Ee("/error")}e(2,l=!0)});function J(){p.link=this.value,e(1,p),e(0,c)}const q=()=>T(p.link),se=()=>T(p.link);function te(){p.observeName=this.value,e(1,p),e(0,c)}function de(){p.name=this.value,e(1,p),e(0,c)}function G(){c=this.value,e(0,c)}function pe(){p.thumb=this.value,e(1,p),e(0,c)}function W(){p.meta=this.value,e(1,p),e(0,c)}function Y(){p.newestOnTop=this.checked,e(1,p),e(0,c)}function Q(){p.dead=this.checked,e(1,p),e(0,c)}const Z=()=>e(7,m=!1),Ce=()=>e(7,m=!0),$=()=>{k(p.id)},re=P=>P.channelid===p.id;return s.$$.update=()=>{s.$$.dirty[0]&3&&(e(1,p.contains=c===""?[]:c.split(","),p),e(3,r=v(p.link)))},[c,p,l,r,u,f,g,m,_,N,k,y,S,j,R,T,J,q,se,te,de,G,pe,W,Y,Q,Z,Ce,$,re]}class Wo extends Ae{constructor(t){super(),Pe(this,t,Vo,Go,Le,{},null,[-1,-1])}}function Ko(s){let t;return{c(){t=h("h1"),t.textContent="Error, check if the server still up or if your internet connection is fine"},m(e,n){L(e,t,n)},p:M,i:M,o:M,d(e){e&&O(t)}}}class Yo extends Ae{constructor(t){super(),Pe(this,t,null,Ko,Le,{})}}function Ho(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b,N,k=s[2]&&es(s);return{c(){t=h("h1"),t.textContent="Ibhub login",e=A(),n=h("div"),o=D("email: "),i=h("input"),l=A(),r=h("div"),c=D("password: "),u=h("input"),f=A(),g=h("button"),g.textContent="Register",m=A(),_=h("button"),_.textContent="login",w=A(),k&&k.c(),p=Xe(),a(i,"type","text"),a(i,"name",""),a(n,"class","input svelte-php5by"),a(u,"type","password"),a(u,"name",""),a(r,"class","input svelte-php5by"),a(g,"class","svelte-php5by"),a(_,"class","svelte-php5by")},m(C,v){L(C,t,v),L(C,e,v),L(C,n,v),d(n,o),d(n,i),ce(i,s[4].email),L(C,l,v),L(C,r,v),d(r,c),d(r,u),ce(u,s[4].password),L(C,f,v),L(C,g,v),L(C,m,v),L(C,_,v),L(C,w,v),k&&k.m(C,v),L(C,p,v),b||(N=[K(i,"input",s[8]),K(u,"input",s[9]),K(g,"click",s[6]),K(_,"click",s[7])],b=!0)},p(C,v){v&16&&i.value!==C[4].email&&ce(i,C[4].email),v&16&&u.value!==C[4].password&&ce(u,C[4].password),C[2]?k?k.p(C,v):(k=es(C),k.c(),k.m(p.parentNode,p)):k&&(k.d(1),k=null)},d(C){C&&O(t),C&&O(e),C&&O(n),C&&O(l),C&&O(r),C&&O(f),C&&O(g),C&&O(m),C&&O(_),C&&O(w),k&&k.d(C),C&&O(p),b=!1,me(N)}}}function Xo(s){let t,e,n=s[0][s[0].model?"model":"user"].email+"",o,i,l,r,c;return{c(){t=h("div"),e=D("Welcome "),o=D(n),i=A(),l=h("button"),l.textContent="logout",a(t,"class","success svelte-php5by"),a(l,"class","svelte-php5by")},m(u,f){L(u,t,f),d(t,e),d(t,o),L(u,i,f),L(u,l,f),r||(c=K(l,"click",s[5]),r=!0)},p(u,f){f&1&&n!==(n=u[0][u[0].model?"model":"user"].email+"")&&ee(o,n)},d(u){u&&O(t),u&&O(i),u&&O(l),r=!1,c()}}}function es(s){let t,e,n;return{c(){t=h("div"),e=D(s[3]),a(t,"class",n=on(s[1])+" svelte-php5by")},m(o,i){L(o,t,i),d(t,e)},p(o,i){i&8&&ee(e,o[3]),i&2&&n!==(n=on(o[1])+" svelte-php5by")&&a(t,"class",n)},d(o){o&&O(t)}}}function Qo(s){let t,e;function n(l,r){return l[0]?Xo:Ho}let o=n(s),i=o(s);return{c(){t=h("main"),e=h("article"),i.c(),a(e,"class","svelte-php5by")},m(l,r){L(l,t,r),d(t,e),i.m(e,null)},p(l,[r]){o===(o=n(l))&&i?i.p(l,r):(i.d(1),i=o(l),i&&(i.c(),i.m(e,null)))},i:M,o:M,d(l){l&&O(t),i.d()}}}function Zo(s,t,e){const n=window.localStorage.getItem("pocketbase_auth");let o=n?JSON.parse(n):!1,i="success",l=!1,r="";o&&(x.authStore.save(o.token,o.model),console.log(o));async function c(){x.authStore.clear(),e(0,o=!1)}let u={email:"",password:""};async function f(){try{const p=await x.users.create({email:u.email,password:u.password,passwordConfirm:u.password});console.log(p),p&&g()}catch{e(1,i="error"),e(2,l=!0),e(3,r="email already used")}}async function g(){const p=await x.users.requestVerification(u.email);p&&(console.log(p),e(1,i="success"),e(2,l=!0),e(3,r="Account created successfully, please verify your email"))}async function m(){const p=await x.users.authViaEmail(u.email,u.password);p&&(console.log(p),e(0,o=p))}function _(){u.email=this.value,e(4,u)}function w(){u.password=this.value,e(4,u)}return[o,i,l,r,u,c,f,m,_,w]}class $o extends Ae{constructor(t){super(),Pe(this,t,Zo,Qo,Le,{})}}function xo(s){let t,e,n,o,i,l,r,c,u,f,g,m,_,w,p,b,N,k,C;return document.title=t=s[0]+" ibhub",p=new ho({}),k=new Us({props:{routes:{"/dashboard":ro,"/feed":yo,"/new":Wo,"/error":Yo,"/":$o}}}),{c(){e=A(),n=h("main"),o=h("nav"),i=h("a"),i.textContent="Home",l=A(),r=h("a"),r.textContent="Dashboard",c=A(),u=h("a"),f=D(`Feed 
			`),g=h("strong"),m=D(s[0]),_=A(),w=h("div"),he(p.$$.fragment),b=A(),N=h("div"),he(k.$$.fragment),a(i,"href","/#/"),a(i,"class","svelte-1gjpka5"),V(i,"active",s[1]==="/"),a(r,"href","/#/dashboard"),a(r,"class","svelte-1gjpka5"),V(r,"active",s[1]==="/dashboard"),a(u,"href","/#/feed"),a(u,"class","svelte-1gjpka5"),V(u,"active",s[1]==="/feed"),a(w,"class","settings svelte-1gjpka5"),a(o,"class","svelte-1gjpka5"),a(N,"class","app svelte-1gjpka5")},m(v,y){L(v,e,y),L(v,n,y),d(n,o),d(o,i),d(o,l),d(o,r),d(o,c),d(o,u),d(u,f),d(u,g),d(g,m),d(o,_),d(o,w),ue(p,w,null),d(n,b),d(n,N),ue(k,N,null),C=!0},p(v,[y]){(!C||y&1)&&t!==(t=v[0]+" ibhub")&&(document.title=t),y&2&&V(i,"active",v[1]==="/"),y&2&&V(r,"active",v[1]==="/dashboard"),(!C||y&1)&&ee(m,v[0]),y&2&&V(u,"active",v[1]==="/feed")},i(v){C||(F(p.$$.fragment,v),F(k.$$.fragment,v),C=!0)},o(v){X(p.$$.fragment,v),X(k.$$.fragment,v),C=!1},d(v){v&&O(e),v&&O(n),fe(p),fe(k)}}}function ei(s,t,e){let n,o;ke(s,He,l=>e(2,n=l)),ke(s,Rs,l=>e(1,o=l)),(async()=>{const l=await x.records.getFullList("news");He.update(r=>l.length)})();let i="";return s.$$.update=()=>{s.$$.dirty&4&&(n>0?e(0,i=`(${n})`):e(0,i=""))},[i,o,n]}class ti extends Ae{constructor(t){super(),Pe(this,t,ei,xo,Le,{})}}console.log("https://ibhub.fly.dev");console.log("https://ibhub-pocketbase.fly.dev/");new ti({target:document.getElementById("app")});
